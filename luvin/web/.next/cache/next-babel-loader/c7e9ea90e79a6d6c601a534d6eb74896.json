{"ast":null,"code":"import Cookie from \"js-cookie\";\nconst TOKEN_COOKIE_KEY = \"_tl\";\nconst singleton = Symbol(\"singleton\");\nconst singletonEnforcer = Symbol(\"singletonEnforcer\");\n\nclass Authendication {\n  constructor(enforcer) {\n    if (enforcer !== singletonEnforcer) {\n      throw new Error('Constructor không được phép gọi trực tiếp, hãy dùng \"Authendication.instance\"');\n    }\n\n    this.token = null;\n  }\n\n  static get instance() {\n    if (!this[singleton]) {\n      this[singleton] = new Authendication(singletonEnforcer);\n    }\n\n    return this[singleton];\n  }\n  /**\n   * Get token\n   * @returns {*|null}\n   */\n\n\n  getToken() {\n    if (!this.token) {\n      const token = Cookie.get(TOKEN_COOKIE_KEY);\n\n      if (token) {\n        this.token = token;\n      }\n    }\n\n    return this.token;\n  }\n  /**\n   * Lưu token cookie\n   * @param token\n   */\n\n\n  saveAuthToCookie(token) {\n    Cookie.set(TOKEN_COOKIE_KEY, token, {\n      expires: 90\n    }); // 3 tháng\n\n    this.token = token;\n  }\n\n  logout() {\n    Cookie.remove(TOKEN_COOKIE_KEY);\n    this.token = null;\n  }\n\n}\n\nexport default Authendication.instance;","map":null,"metadata":{},"sourceType":"module"}