(this["webpackJsonppublisher-webhook-cms"]=this["webpackJsonppublisher-webhook-cms"]||[]).push([[0],{251:function(e,t,a){e.exports=a(483)},482:function(e,t,a){},483:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(29),c=a.n(l),o=a(15),s=a(2),i=a.n(s),m=a(7),u=a(14),d=a(56),p=a(28),E=a(11),b=a.n(E),f=a(85),v=a.n(f),g=(a(288),a(131));var h=function(e){return r.a.createElement("div",{class:"account-pages my-5 pt-5"},r.a.createElement("div",{class:"container"},r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"col-lg-12"},r.a.createElement("div",{class:"text-center mb-5"},r.a.createElement("h1",{class:"display-2 font-weight-medium"},"4",r.a.createElement("i",{class:"bx bx-buoy bx-spin text-primary display-3"}),"4"),r.a.createElement("h4",{class:"text-uppercase"},"Sorry, page not found"),r.a.createElement("div",{class:"mt-5 text-center"},r.a.createElement(d.b,{to:"/",className:"btn btn-primary waves-effect waves-light"},"Back to Dashboard"))))),r.a.createElement("div",{class:"row justify-content-center"},r.a.createElement("div",{class:"col-md-8 col-xl-6"},r.a.createElement("div",null,r.a.createElement("img",{src:"/assets/images/error-img.png",alt:"",class:"img-fluid"}))))))},y="SALE_MOD",w="ROLE_ADMIN",x=["CS_STAFF","CS_STAFF","SALE_STAFF","B3_MOD",y,w],O=Object(o.atom)({key:"authState",default:{}}),j=function(e){var t=e.component,a=e.role,n=Object(g.a)(e,["component","role"]),l=Object(o.useRecoilValue)(O),c=(Object(p.g)(),x.indexOf(a)),s=x.indexOf(l.role);return c<0||s<c?r.a.createElement(h,null):r.a.createElement(p.b,Object.assign({render:function(e){return l._id?r.a.createElement(t,e):r.a.createElement(p.a,{to:"/"})}},n))};j.defaultProps={role:"CS_STAFF"};var C=j,k=function(e){var t=e.component,a=Object(g.a)(e,["component"]),n=Object(o.useRecoilValue)(O);return console.log("auth",n),r.a.createElement(p.b,Object.assign({render:function(e){return n._id?r.a.createElement(p.a,{to:"/users"}):r.a.createElement(t,e)}},a))},S=a(1),N=a(225),D=a.n(N),M=a(226),T=a(227),F=a(134),P=a.n(F),A=Symbol("singleton"),z=Symbol("singletonEnforcer"),L=function(){function e(t){if(Object(M.a)(this,e),t!==z)throw new Error('Constructor kh\xf4ng \u0111\u01b0\u1ee3c ph\xe9p g\u1ecdi tr\u1ef1c ti\u1ebfp, h\xe3y d\xf9ng "Authendication.instance"');this.token=null}return Object(T.a)(e,[{key:"getToken",value:function(){if(!this.token){var e=P.a.get("_tl");e&&(this.token=e)}return this.token}},{key:"saveAuthToCookie",value:function(e){P.a.set("_tl",e,{expires:90}),this.token=e}},{key:"logout",value:function(){P.a.remove("_tl"),this.token=null}}],[{key:"instance",get:function(){return this[A]||(this[A]=new e(z)),this[A]}}]),e}().instance;function U(e){return _.apply(this,arguments)}function _(){return(_=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(a=e.sent,!(t.status>=400)){e.next=6;break}throw new Error(a.message);case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="".concat("https://api.luvin.com.vn/v1").concat(e);return D()(a,Object(S.a)({headers:t.headers?Object(S.a)({authorization:L.getToken()},t.headers):{authorization:L.getToken(),Accept:"application/json","Content-Type":"application/json"}},t)).then(U)}var V=function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/auth/me");case 3:return t=e.sent,e.abrupt("return",t);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/auth/login",{method:"POST",body:JSON.stringify(t)});case 3:return a=e.sent,e.abrupt("return",a);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();var B=function(e){var t=Object(o.useSetRecoilState)(O),a=Object(n.useState)({phone:"",password:""}),l=Object(u.a)(a,2),c=l[0],s=l[1],d=function(){var e=Object(m.a)(i.a.mark((function e(a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,R({phone:c.phone,password:c.password});case 4:if(!(n=e.sent).data.user){e.next=11;break}if(v()(x,n.data.user.role)){e.next=9;break}return b.a.error("T\xe0i kho\u1ea3n c\u1ee7a b\u1ea1n kh\xf4ng \u0111\u01b0\u1ee3c ph\xe9p truy c\u1eadp trang n\xe0y"),e.abrupt("return");case 9:L.saveAuthToCookie(n.data.token),t(n.data.user);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),b.a.error(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"account-pages my-5 pt-sm-5"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-md-8 col-lg-6 col-xl-5"},r.a.createElement("div",{className:"card overflow-hidden"},r.a.createElement("div",{className:"bg-soft-primary"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-7"},r.a.createElement("div",{className:"text-primary p-4"},r.a.createElement("h5",{className:"text-primary"},"Welcome Back !"),r.a.createElement("p",null,"Sign in to continue to Luvin dashboard."))),r.a.createElement("div",{className:"col-5 align-self-end"},r.a.createElement("img",{src:"https://themesbrand.com/skote/layouts/vertical/assets/images/profile-img.png",alt:"",className:"img-fluid"})))),r.a.createElement("div",{className:"card-body pt-0"},r.a.createElement("div",null,r.a.createElement("a",{href:"index.html"},r.a.createElement("div",{className:"avatar-md profile-user-wid mb-4"},r.a.createElement("span",{className:"avatar-title rounded-circle bg-light"},r.a.createElement("img",{src:"/assets/images/arrows.png",alt:"",className:"rounded-circle",height:"34"}))))),r.a.createElement("div",{className:"p-2"},r.a.createElement("form",{className:"form-horizontal",onSubmit:d},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"username"},"Username"),r.a.createElement("input",{type:"text",className:"form-control",id:"username",placeholder:"Enter username",value:c.phone,onChange:function(e){return s(Object(S.a)(Object(S.a)({},c),{},{phone:e.target.value}))}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"userpassword"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",id:"userpassword",placeholder:"Enter password",value:c.password,onChange:function(e){return s(Object(S.a)(Object(S.a)({},c),{},{password:e.target.value}))}})),r.a.createElement("div",{className:"custom-control custom-checkbox"},r.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"customControlInline"}),r.a.createElement("label",{className:"custom-control-label",for:"customControlInline"},"Remember me")),r.a.createElement("div",{className:"mt-3"},r.a.createElement("button",{className:"btn btn-primary btn-block waves-effect waves-light",type:"submit"},"Log In")))))))))))},J=a(49),q=a(21),H=(a(293),a(158),a(52)),Y=a.n(H),G=a(72),W=a.n(G),K=a(247),Z=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/upload/array",{method:"POST",headers:{},body:t});case 3:return a=e.sent,e.abrupt("return",a);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();var X=function(e){var t=e.initFiles,a=e.onUploaded,l=e.maxFiles,c=Object(n.useState)(t||[]),o=Object(u.a)(c,2),s=o[0],d=o[1],p=Object(K.a)({maxFiles:l||20,accept:"image/*",onDrop:function(){var e=Object(m.a)(i.a.mark((function e(t){var n,r,l,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,n=new FormData,r=0;r<t.length;r++)l=t[r],n.append("files",l);return e.next=5,Z(n);case 5:c=e.sent,o=c.data.map((function(e){var t=e.path;return"".concat("https://api.luvin.com.vn/v1".replace("/v1",""),"/public/uploads/").concat(t)})),d(o),a(o),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()}),E=p.getRootProps,b=p.getInputProps;return r.a.createElement("div",Object.assign({},E({className:"dropzone"}),{id:"categoryImage"}),r.a.createElement("input",b()),s.length?r.a.createElement(r.a.Fragment,null,s.map((function(e){return r.a.createElement("div",{class:"dz-preview"},r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{class:"dz-image mr-2"},r.a.createElement("img",{"data-dz-thumbnail":"",alt:"d7ea7ddfbec5bc772ef8ddb3599900c3.jpg",src:e,style:{height:"120px"}}))))}))):r.a.createElement("div",{class:"dz-message needsclick",style:{fontSize:"14px"}},r.a.createElement("div",{class:"mb-3"},r.a.createElement("i",{class:"display-4 text-muted bx bxs-cloud-upload"})),r.a.createElement("p",null,"Drop files here or click to upload.")))};function $(){return c.a.createPortal(r.a.createElement("div",{className:"modal-backdrop fade show"}),document.querySelector("body"))}function Q(e){var t=e.children,a=e.visible;return Object(n.useEffect)((function(){return a?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open"),function(){document.body.classList.remove("modal-open")}}),[a]),document.getElementById("modal-container")?c.a.createPortal(t,document.getElementById("modal-container")):t}var ee=function(e){var t=e.children,a=e.visible;return r.a.createElement(Q,{visible:a},a&&r.a.createElement($,null),r.a.createElement("div",{class:"modal fade ".concat(a?"show":""),style:{display:a?"block":"none"}},r.a.createElement("div",{class:"modal-dialog modal-dialog-centered",role:"document"},r.a.createElement("div",{class:"modal-content"},t))))};var te=function(e){var t=e.children;return r.a.createElement("div",{class:"modal-header"},t)};var ae=function(e){var t=e.children;return r.a.createElement("div",{class:"modal-body"},t)};var ne=function(e){var t=e.children;return r.a.createElement("div",{class:"modal-footer"},t)},re=function(){var e=Object(m.a)(i.a.mark((function e(t,a,n,r,l){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/user/all?limit=".concat(t,"&page=").concat(a,"&name=").concat(n,"&level=").concat(r,"&role=").concat(l));case 3:return c=e.sent,e.abrupt("return",c);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a,n,r,l){return e.apply(this,arguments)}}(),le=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/user",{method:"POST",body:JSON.stringify(t)});case 3:return a=e.sent,e.abrupt("return",a);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(m.a)(i.a.mark((function e(t,a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/user/".concat(t),{method:"PUT",body:JSON.stringify(a)});case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),oe=function(){var e=Object(m.a)(i.a.mark((function e(t,a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/user/".concat(t),{method:"DELETE"});case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}();var se=function(e){for(var t in e)null!==e[t]&&void 0!==e[t]&&""!==e[t]||delete e[t]},ie=function(e,t){return v()(e,t)},me=(a(365),a(493)),ue=(me.a.Header,me.a.Content,me.a.Footer,me.a.Sider,function(e){var t=e.children,a=Object(o.useRecoilState)(O),l=Object(u.a)(a,2),c=l[0],s=l[1],i=Object(n.useState)(!1),m=Object(u.a)(i,2),E=(m[0],m[1],Object(p.g)());return r.a.createElement("div",{id:"layout-wrapper"},r.a.createElement("header",{id:"page-topbar"},r.a.createElement("div",{class:"navbar-header"},r.a.createElement("div",{class:"d-flex"},r.a.createElement("div",{class:"navbar-brand-box"},r.a.createElement(d.b,{class:"logo logo-dark",href:"/"},r.a.createElement("span",{class:"logo-sm"},r.a.createElement("img",{src:"/assets/images/logo.png",alt:"",height:"22"})),r.a.createElement("span",{class:"logo-lg"},r.a.createElement("img",{src:"/assets/images/logo.png",alt:"",height:"17"}))),r.a.createElement(d.b,{class:"logo logo-light",href:"/"},r.a.createElement("span",{class:"logo-sm"},r.a.createElement("img",{src:"/assets/images/logo.png",alt:"",height:"22"})),r.a.createElement("span",{class:"logo-lg"},r.a.createElement("img",{src:"/assets/images/logo.png",alt:"",height:"19"}))))),r.a.createElement("div",{class:"d-flex"},r.a.createElement("div",{class:"dropdown d-inline-block d-lg-none ml-2"}),r.a.createElement("div",{class:"dropdown d-inline-block"},r.a.createElement("button",{type:"button",class:"btn header-item waves-effect",id:"page-header-user-dropdown","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},r.a.createElement("img",{class:"rounded-circle header-profile-user",src:c.avatar||"https://www.seekpng.com/png/detail/115-1150053_avatar-png-transparent-png-royalty-free-default-user.png",alt:"Header Avatar"}),r.a.createElement("span",{class:"d-none d-xl-inline-block ml-1",key:"t-henry"},c.name),r.a.createElement("i",{class:"mdi mdi-chevron-down d-none d-xl-inline-block"})),r.a.createElement("div",{class:"dropdown-menu dropdown-menu-right"},r.a.createElement("div",{class:"dropdown-divider"}),r.a.createElement("a",{class:"dropdown-item text-danger",onClick:function(){L.logout(),s({}),E.push("/")}},r.a.createElement("i",{class:"bx bx-power-off font-size-16 align-middle mr-1 text-danger"})," ",r.a.createElement("span",{key:"t-logout"},"Logout"))))))),r.a.createElement("div",{class:"vertical-menu"},r.a.createElement("div",{"data-simplebar":!0,class:"h-100"},r.a.createElement("div",{id:"sidebar-menu"},r.a.createElement("ul",{class:"metismenu list-unstyled",id:"side-menu"},r.a.createElement("li",{class:"menu-title",key:"t-menu"},"Menu"),r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){return E.push("/users")},class:"waves-effect","aria-expanded":"false"},r.a.createElement("i",{class:"bx bxs-user-detail"}),r.a.createElement("span",{key:"t-contacts"},"Th\xe0nh vi\xean"))),r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){return E.push("/vouchers")},class:"waves-effect","aria-expanded":"false"},r.a.createElement("i",{class:"bx bx-gift"}),r.a.createElement("span",{key:"t-contacts"},"Voucher"))),r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){return E.push("/products")},class:"waves-effect","aria-expanded":"false"},r.a.createElement("i",{class:"bx bx-store"}),r.a.createElement("span",{key:"t-projects"},"S\u1ea3n ph\u1ea9m"))),r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){return E.push("/orders")},class:"waves-effect","aria-expanded":"false"},r.a.createElement("i",{class:"bx bx-task"}),r.a.createElement("span",{key:"t-tasks"},"\u0110\u01a1n h\xe0ng"))),r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){return E.push("/categories")},class:"waves-effect","aria-expanded":"false"},r.a.createElement("i",{class:"bx bx-list-ol"}),r.a.createElement("span",{key:"t-contacts"},"Chuy\xean m\u1ee5c s\u1ea3n ph\u1ea9m"))),r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){return E.push("/posts")},class:"waves-effect","aria-expanded":"false"},r.a.createElement("i",{class:"bx bx-news"}),r.a.createElement("span",{key:"t-contacts"},"B\xe0i vi\u1ebft"))),r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){return E.push("/feedbacks")},class:"waves-effect","aria-expanded":"false"},r.a.createElement("i",{class:"bx bx-message-rounded"}),r.a.createElement("span",{key:"t-contacts"},"Ph\u1ea3n h\u1ed3i"))),r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){return E.push("/pages")},class:"waves-effect","aria-expanded":"false"},r.a.createElement("i",{class:"bx bx-detail"}),r.a.createElement("span",{key:"t-contacts"},"Trang"))),r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){return E.push("/tasty")},class:"waves-effect","aria-expanded":"false"},r.a.createElement("i",{class:"bx bxs-hourglass-bottom"}),r.a.createElement("span",{key:"t-contacts"},"Tasty"))),r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){return E.push("/about-us")},class:"waves-effect","aria-expanded":"false"},r.a.createElement("i",{class:"bx bxs-hourglass-bottom"}),r.a.createElement("span",{key:"t-contacts"},"About Us"))),r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){return E.push("/settings")},class:"waves-effect","aria-expanded":"false"},r.a.createElement("i",{class:"bx bx-cog"}),r.a.createElement("span",{key:"t-contacts"},"Trang ch\u1ee7"))),r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){return E.push("/pos")},class:"waves-effect","aria-expanded":"false"},r.a.createElement("i",{class:"bx bx-wifi"}),r.a.createElement("span",{key:"t-contacts"},"POS"))))))),r.a.createElement("div",{class:"main-content"},t,r.a.createElement("div",{id:"modal-container"}),r.a.createElement("footer",{class:"footer",style:{position:"unset"}},r.a.createElement("div",{class:"container-fluid"},r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"col-sm-6"},"2020 \xa9 eComviet."),r.a.createElement("div",{class:"col-sm-6"},r.a.createElement("div",{class:"text-sm-right d-none d-sm-block"},"Design & Develop by eComviet")))))))}),de=function(e){return function(t){t.chidren;return r.a.createElement(ue,null,r.a.createElement(e,null))}};function pe(e){var t=e.visible,a=e.onClose,l=e.user,c=e.onUpdated,o=e.isCreate,s=Object(n.useState)({name:l.name||"",email:l.email||"",phone:l.phone||"",password:"",birthday:l.birthday?new Date(l.birthday):"",address:l.address||"",point:l.point||0,level:l.level||"",role:l.role||"",avatar:l.avatar||"",loading:!1}),d=Object(u.a)(s,2),p=d[0],E=d[1],f=function(e,t){E(Object(S.a)(Object(S.a)({},p),{},Object(q.a)({},e,t)))},v=function(){var e=Object(m.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E(Object(S.a)(Object(S.a)({},p),{},{loading:!0})),e.prev=1,t.preventDefault(),a={name:p.name,email:p.email,phone:p.phone,password:p.password,birthday:p.birthday,address:p.address,point:p.point,level:p.level,role:p.role,avatar:p.avatar},se(a),n={},!o){e.next=13;break}return e.next=9,le(a);case 9:n=e.sent,b.a.success("Create user success"),e.next=17;break;case 13:return e.next=15,ce(l._id,a);case 15:n=e.sent,b.a.success("Update user info success");case 17:c(n.data),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(1),b.a.error(e.t0.message);case 23:E(Object(S.a)(Object(S.a)({},p),{},{loading:!1}));case 24:case"end":return e.stop()}}),e,null,[[1,20]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(ee,{visible:t},r.a.createElement(te,null,r.a.createElement("h5",{class:"modal-title"},o?"Create user":"Update user"),r.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:a},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("form",{onSubmit:v},r.a.createElement(ae,null,r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"userName",class:"col-sm-3 col-form-label"},"Name"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement("input",{type:"text",class:"form-control",id:"userName",value:p.name,onChange:function(e){return f("name",e.target.value)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"userEmail",class:"col-sm-3 col-form-label"},"Email"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement("input",{type:"email",class:"form-control",id:"userEmail",value:p.email,onChange:function(e){return f("email",e.target.value)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"userPhone",class:"col-sm-3 col-form-label"},"Phone"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement("input",{type:"tel",class:"form-control",id:"userPhone",value:p.phone,onChange:function(e){return f("phone",e.target.value)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"userPassword",class:"col-sm-3 col-form-label"},"Password"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement("input",{type:"password",class:"form-control",id:"userPassword",value:p.password,onChange:function(e){return f("password",e.target.value)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"userBirday",class:"col-sm-3 col-form-label"},"Birthday"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement(W.a,{dateFormat:"dd/MM/yyyy",className:"form-control",selected:p.birthday,onChange:function(e){f("birthday",e)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"userAddress",class:"col-sm-3 col-form-label"},"Address"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement("textarea",{required:"",class:"form-control",rows:"2",id:"userAddress",value:p.address,onChange:function(e){return f("address",e.target.value)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"userPoint",class:"col-sm-3 col-form-label"},"Point"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement("input",{type:"number",class:"form-control",id:"userPoint",value:p.point,onChange:function(e){return f("point",e.target.value)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"userPoint",class:"col-sm-3 col-form-label"},"Level"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement("select",{class:"form-control",id:"level-select",value:p.level,onChange:function(e){return f("level",e.target.value)}},r.a.createElement("option",{value:""},"Bzone"),r.a.createElement("option",{value:"LEVEL_GOLD"},"Gold"),r.a.createElement("option",{value:"LEVEL_SILVER"},"Silver"),r.a.createElement("option",{value:"LEVEL_PLATINUM"},"Platinum")))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"productDiscount",class:"col-sm-3 col-form-label"},"Role"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement("select",{class:"form-control",id:"role-select",value:p.role,onChange:function(e){return f("role",e.target.value)}},r.a.createElement("option",{value:""},"Th\xe0nh vi\xean"),r.a.createElement("option",{value:"CS_STAFF"},"CS Staff"),r.a.createElement("option",{value:"SALE_STAFF"},"Sale Staff"),r.a.createElement("option",{value:"B3_MOD"},"B3 MOD"),r.a.createElement("option",{value:"SALE_MOD"},"Sale MOD"),r.a.createElement("option",{value:"ROLE_ADMIN"},"Admin")))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"categoryImage",class:"col-sm-3 col-form-label"},"Avatar"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement(X,{initFiles:[p.avatar],onUploaded:function(e){f("avatar",e[0])},maxFiles:1})))),r.a.createElement(ne,null,r.a.createElement("button",{type:"button",class:"btn btn-secondary",onClick:a},"Close"),r.a.createElement("button",{type:"submit",class:"btn btn-primary w-md"},p.loading&&r.a.createElement("i",{class:"bx bx-loader bx-spin font-size-16 align-middle mr-2"}),"Submit"))))}var Ee=de((function(e){var t=Object(o.useRecoilValue)(O),a=Object(n.useState)({openModalCreate:!1,openModalUpdate:!1,userSelected:{},users:[],total:0,page:1,name:"",level:"",role:"",loading:!1}),l=Object(u.a)(a,2),c=l[0],s=l[1],d=function(e,t){s(Object(S.a)(Object(S.a)({},c),{},Object(q.a)({},e,t)))},p=function(){var e=Object(m.a)(i.a.mark((function e(t,a,n,r){var l,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(Object(S.a)(Object(S.a)({},c),{},{loading:!0,page:t})),l=Object(S.a)(Object(S.a)({},c),{},{loading:!0,page:t}),e.prev=2,e.next=5,re(20,t,a,n,r);case 5:o=e.sent,l.users=o.data.users,l.total=o.data.total,l.loading=!1,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),l.loading=!1,b.a.error(e.t0.message);case 15:s(l);case 16:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,a,n,r){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){p(1,c.name,c.level,c.role)}),[]);var E=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(S.a)(Object(S.a)({},c),{},{loading:!0}),e.prev=1,e.next=4,oe(t);case 4:e.sent,a.loading=!1,a.users=c.users.filter((function(e){return e._id!==t})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),a.loading=!1,b.a.error(e.t0.message);case 13:s(a);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,(c.openModalUpdate||c.openModalCreate)&&r.a.createElement(pe,{isCreate:c.openModalCreate,visible:c.openModalUpdate||c.openModalCreate,user:c.userSelected,onClose:function(){s(Object(S.a)(Object(S.a)({},c),{},{openModalUpdate:!1,openModalCreate:!1,userSelected:{}}))},onUpdated:function(e){c.openModalCreate?s(Object(S.a)(Object(S.a)({},c),{},{openModalCreate:!1,users:20===c.users.length?[e].concat(Object(J.a)(c.users)).slice(0,-1):[e].concat(Object(J.a)(c.users))})):s(Object(S.a)(Object(S.a)({},c),{},{openModalUpdate:!1,userSelected:{},users:c.users.map((function(t){return t._id===e._id?e:t}))}))}}),r.a.createElement("div",{className:"page-content"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"page-title-box d-flex align-items-center justify-content-between"},r.a.createElement("h4",{className:"mb-0 font-size-18"},"Users List"),r.a.createElement("div",{className:"page-title-right"},ie([w],t.role)&&r.a.createElement("button",{type:"submit",class:"btn btn-primary w-md",onClick:function(){s(Object(S.a)(Object(S.a)({},c),{},{openModalCreate:!0}))}},"Th\xeam th\xe0nh vi\xean"))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-3"},r.a.createElement("div",{class:"card"},r.a.createElement("div",{class:"card-body"},r.a.createElement("h4",{class:"card-title mb-4"},"Filter"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),p(1,c.name,c.level,c.role)}},r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{for:"level-select"},"H\u1ea1ng"),r.a.createElement("select",{class:"form-control",id:"level-select",value:c.level,onChange:function(e){return d("level",e.target.value)}},r.a.createElement("option",{value:""},"T\u1ea5t c\u1ea3"),r.a.createElement("option",{value:"LEVEL_PLATINUM"},"Platinum"),r.a.createElement("option",{value:"LEVEL_SILVER"},"Silver"),r.a.createElement("option",{value:"LEVEL_GOLD"},"Gold"),r.a.createElement("option",{value:"LEVEL_BZONZE"},"Bzone"))),r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{for:"role-select"},"Lo\u1ea1i"),r.a.createElement("select",{class:"form-control",id:"role-select",value:c.role,onChange:function(e){return d("role",e.target.value)}},r.a.createElement("option",{value:""},"T\u1ea5t c\u1ea3"),r.a.createElement("option",{value:"CS_STAFF"},"CS Staff"),r.a.createElement("option",{value:"SALE_STAFF"},"Sale Staff"),r.a.createElement("option",{value:"B3_MOD"},"B3 MOD"),r.a.createElement("option",{value:"SALE_MOD"},"Sale MOD"),r.a.createElement("option",{value:"ROLE_ADMIN"},"Admin"))),r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{for:"name-select"},"T\xean"),r.a.createElement("input",{class:"form-control",type:"text",id:"name-select",value:c.name,onChange:function(e){return d("name",e.target.value)}})),r.a.createElement("button",{type:"submit",class:"btn btn-primary"},"T\xecm ki\u1ebfm"))))),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-centered table-nowrap table-hover"},r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col",style:{width:"70px"}},"#"),r.a.createElement("th",{scope:"col"},"Name"),r.a.createElement("th",{scope:"col"},"Phone"),r.a.createElement("th",{scope:"col"},"Email"),r.a.createElement("th",{scope:"col"},"Point"),r.a.createElement("th",{scope:"col"},"Level"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,c.users.map((function(e,a){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,e.avatar?r.a.createElement("img",{class:"rounded-circle avatar-xs",src:e.avatar,alt:""}):r.a.createElement("div",{className:"avatar-xs"},r.a.createElement("span",{className:"avatar-title rounded-circle"},(e.name||"").charAt(0).toUpperCase()))),r.a.createElement("td",null,r.a.createElement("h5",{className:"font-size-14 mb-1"},r.a.createElement("a",{className:"text-dark"},e.name)),r.a.createElement("p",{className:"text-muted mb-0"},e.address)),r.a.createElement("td",null,e.phone),r.a.createElement("td",null,e.email),r.a.createElement("td",null,e.point),r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("a",{className:"badge badge-soft-primary font-size-11 m-1"},e.level))),r.a.createElement("td",null,r.a.createElement("div",{class:"dropdown"},r.a.createElement("a",{class:"dropdown-toggle card-drop","data-toggle":"dropdown","aria-expanded":"false"},r.a.createElement("i",{class:"mdi mdi-dots-horizontal font-size-18"})),r.a.createElement("ul",{className:"dropdown-menu dropdown-menu-right"},ie([w,y],t.role)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){s(Object(S.a)(Object(S.a)({},c),{},{openModalUpdate:!0,userSelected:e}))},class:"dropdown-item"},r.a.createElement("i",{class:"mdi mdi-pencil font-size-16 text-success mr-1"})," ","Edit")),r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){return E(e._id)},class:"dropdown-item"},r.a.createElement("i",{class:"mdi mdi-trash-can font-size-16 text-danger mr-1"})," ","Delete")))))))}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement(Y.a,{previousLabel:r.a.createElement("i",{class:"mdi mdi-chevron-left"}),nextLabel:r.a.createElement("i",{class:"mdi mdi-chevron-right"}),forcePage:c.page-1,breakLabel:"...",breakClassName:"break-me",pageCount:Math.ceil(c.total/20),marginPagesDisplayed:2,pageRangeDisplayed:2,onPageChange:function(e){p(e.selected+1,c.name,c.level,c.role)},containerClassName:"pagination pagination-rounded justify-content-center mt-4",pageClassName:"page-item",previousClassName:"page-item",nextClassName:"page-item",activeClassName:"active",pageLinkClassName:"page-link",previousLinkClassName:"page-link",nextLinkClassName:"page-link"}))))))))))})),be=Object(o.atom)({key:"categoriesState",default:[]}),fe=function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/category/all");case 3:return t=e.sent,e.abrupt("return",t);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),ve=function(){var e=Object(m.a)(i.a.mark((function e(t,a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/category/".concat(t),{method:"PUT",body:JSON.stringify(a)});case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),ge=function(){var e=Object(o.useRecoilState)(be),t=Object(u.a)(e,2),a=t[0],r=t[1],l=function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe();case 3:t=e.sent,r(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),b.a.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){a.length||l()}),[]),[a,r]};function he(e){var t=e.visible,a=e.onClose,n=e.category;return r.a.createElement(ee,{visible:t},r.a.createElement(te,null,r.a.createElement("h5",{class:"modal-title"},"Category Details"),r.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:a},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement(ae,null,r.a.createElement("table",{class:"table table-centered table-nowrap"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("h5",{class:"text-truncate font-size-14"},"ID"))),r.a.createElement("th",{scope:"row"},n._id)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("h5",{class:"text-truncate font-size-14"},"Ident"))),r.a.createElement("th",{scope:"row"},n.ident)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("h5",{class:"text-truncate font-size-14"},"Name"))),r.a.createElement("th",{scope:"row"},n.name)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("h5",{class:"text-truncate font-size-14"},"Description"))),r.a.createElement("th",{scope:"row"},n.description)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("h5",{class:"text-truncate font-size-14"},"Slug"))),r.a.createElement("th",{scope:"row"},n.slug)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("h5",{class:"text-truncate font-size-14"},"Image"))),r.a.createElement("th",{scope:"row"},r.a.createElement("div",null,r.a.createElement("img",{class:"img-thumbnail",alt:"200x200",width:"200",src:n.image,"data-holder-rendered":"true"}))))))),r.a.createElement(ne,null,r.a.createElement("button",{type:"button",class:"btn btn-secondary",onClick:a},"Close")))}function ye(e){var t=e.visible,a=e.onClose,l=e.category,c=e.onUpdated,s=(Object(o.useRecoilValue)(O),Object(n.useState)({name:l.name||"",description:l.description||"",image:l.image||"",loading:!1})),d=Object(u.a)(s,2),p=d[0],E=d[1],f=function(e,t){E(Object(S.a)(Object(S.a)({},p),{},Object(q.a)({},e,t)))},v=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(Object(S.a)(Object(S.a)({},p),{},{loading:!0})),e.prev=1,t.preventDefault(),e.next=5,ve(l.ident,{name:p.name,description:p.description,image:p.image});case 5:a=e.sent,c(a.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),b.a.error(e.t0.message);case 12:E(Object(S.a)(Object(S.a)({},p),{},{loading:!1}));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(ee,{visible:t},r.a.createElement(te,null,r.a.createElement("h5",{class:"modal-title"},"Update category"),r.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:a},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("form",{onSubmit:v},r.a.createElement(ae,null,r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"categoryName",class:"col-sm-3 col-form-label"},"Name"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement("input",{type:"text",class:"form-control",id:"categoryName",value:p.name,onChange:function(e){return f("name",e.target.value)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"categoryDescription",class:"col-sm-3 col-form-label"},"Description"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement("textarea",{required:"",class:"form-control",rows:"3",id:"categoryDescription",value:p.description,onChange:function(e){return f("description",e.target.value)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"categoryImage",class:"col-sm-3 col-form-label"},"Image"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement(X,{initFiles:[p.image],onUploaded:function(e){f("image",e[0])},maxFiles:1})))),r.a.createElement(ne,null,r.a.createElement("button",{type:"button",class:"btn btn-secondary",onClick:a},"Close"),r.a.createElement("button",{type:"submit",class:"btn btn-primary w-md"},p.loading&&r.a.createElement("i",{class:"bx bx-loader bx-spin font-size-16 align-middle mr-2"}),"Submit"))))}var we=de((function(e){var t=Object(o.useRecoilValue)(O),a=ge(),l=Object(u.a)(a,2),c=l[0],s=l[1],i=Object(n.useState)({openModalDetail:!1,openModalUpdate:!1,categorySelected:{}}),m=Object(u.a)(i,2),d=m[0],p=m[1];return r.a.createElement(r.a.Fragment,null,d.openModalDetail&&r.a.createElement(he,{visible:d.openModalDetail,category:d.categorySelected,onClose:function(){p(Object(S.a)(Object(S.a)({},d),{},{openModalDetail:!1,categorySelected:{}}))}}),d.openModalUpdate&&r.a.createElement(ye,{visible:d.openModalUpdate,category:d.categorySelected,onClose:function(){p(Object(S.a)(Object(S.a)({},d),{},{openModalUpdate:!1,categorySelected:{}}))},onUpdated:function(e){s(c.map((function(t){return t.ident===e.ident?e:t}))),p(Object(S.a)(Object(S.a)({},d),{},{openModalUpdate:!1,categorySelected:{}}))}}),r.a.createElement("div",{class:"page-content"},r.a.createElement("div",{class:"container-fluid"},r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"col-12"},r.a.createElement("div",{class:"page-title-box d-flex align-items-center justify-content-between"},r.a.createElement("h4",{class:"mb-0 font-size-18"},"Categories List")))),r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"col-lg-12"},r.a.createElement("div",{class:""},r.a.createElement("div",{class:"table-responsive"},r.a.createElement("table",{class:"table project-list-table table-nowrap table-centered table-borderless"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col",style:{width:"100px"}},"#"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Slug"),r.a.createElement("th",null,"Ident"),r.a.createElement("th",null,"View Details"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,c.map((function(e,a){return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("img",{src:e.image,alt:"",class:"avatar-sm"})),r.a.createElement("td",null,r.a.createElement("h5",{class:"text-truncate font-size-14"},r.a.createElement("a",{href:"#",class:"text-dark"},e.name)),r.a.createElement("p",{class:"text-muted mb-0"},e.description)),r.a.createElement("td",null,e.slug),r.a.createElement("td",null,e.ident),r.a.createElement("td",null,r.a.createElement("button",{type:"button",class:"btn btn-primary btn-sm btn-rounded",onClick:function(){p(Object(S.a)(Object(S.a)({},d),{},{openModalDetail:!0,categorySelected:e}))}},"View Details")),r.a.createElement("td",null,r.a.createElement("div",{class:"dropdown"},r.a.createElement("a",{href:"#",class:"dropdown-toggle card-drop","data-toggle":"dropdown","aria-expanded":"false"},r.a.createElement("i",{class:"mdi mdi-dots-horizontal font-size-18"})),r.a.createElement("ul",{class:"dropdown-menu dropdown-menu-right"},ie([w,y,"B3_MOD"],t.role)&&r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){p(Object(S.a)(Object(S.a)({},d),{},{openModalUpdate:!0,categorySelected:e}))},class:"dropdown-item"},r.a.createElement("i",{class:"mdi mdi-pencil font-size-16 text-success mr-1"})," ","Edit"))))))})))))))))))})),xe=a(62),Oe=a.n(xe),je=function(){var e=Object(m.a)(i.a.mark((function e(t,a,n,r,l,c,o){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/product?limit=".concat(t,"&page=").concat(a,"&name=").concat(n,"&category=").concat(r,"&discount=").concat(l,"&origin=").concat(c,"&type=").concat(o));case 3:return s=e.sent,e.abrupt("return",s);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a,n,r,l,c,o){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(m.a)(i.a.mark((function e(t,a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/product/".concat(t),{method:"PUT",body:JSON.stringify(a)});case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),ke=function(){var e=Object(m.a)(i.a.mark((function e(t,a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/product/".concat(t),{method:"DELETE"});case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),Se=function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/product/sync-with-luvin");case 3:return t=e.sent,e.abrupt("return",t);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();function Ne(e){var t=e.visible,a=e.onClose,n=e.product;return r.a.createElement(ee,{visible:t},r.a.createElement(te,null,r.a.createElement("h5",{class:"modal-title"},"Product Details"),r.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:a},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement(ae,null,r.a.createElement("table",{class:"table table-centered table-nowrap"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("h5",{class:"text-truncate font-size-14"},"ID"))),r.a.createElement("th",{scope:"row"},n._id)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("h5",{class:"text-truncate font-size-14"},"Ident"))),r.a.createElement("th",{scope:"row"},n.ident)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("h5",{class:"text-truncate font-size-14"},"Name"))),r.a.createElement("th",{scope:"row"},n.name)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("h5",{class:"text-truncate font-size-14"},"Price"))),r.a.createElement("th",{scope:"row"},n.price)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("h5",{class:"text-truncate font-size-14"},"Discount"))),r.a.createElement("th",{scope:"row"},n.discount)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("h5",{class:"text-truncate font-size-14"},"Description"))),r.a.createElement("th",{scope:"row",style:{whiteSpace:"unset"}},n.description)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("h5",{class:"text-truncate font-size-14"},"Slug"))),r.a.createElement("th",{scope:"row"},n.slug)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("h5",{class:"text-truncate font-size-14"},"Image"))),r.a.createElement("th",{scope:"row"},r.a.createElement("div",{className:"d-flex flex-wrap"},n.images.map((function(e){return r.a.createElement("img",{class:"img-thumbnail",alt:"200x200",width:"200",src:e,"data-holder-rendered":"true"})})))))))),r.a.createElement(ne,null,r.a.createElement("button",{type:"button",class:"btn btn-secondary",onClick:a},"Close")))}function De(e){var t=e.visible,a=e.onClose,l=e.product,c=e.onUpdated,s=Object(o.useRecoilValue)(O),d=Object(n.useState)({name:l.name||"",description:l.description||"",images:l.images||[],price:l.price||0,discount:l.discount||0,loading:!1}),p=Object(u.a)(d,2),E=p[0],f=p[1],v=function(e,t){f(Object(S.a)(Object(S.a)({},E),{},Object(q.a)({},e,t)))},g=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(Object(S.a)(Object(S.a)({},E),{},{loading:!0})),e.prev=1,t.preventDefault(),e.next=5,Ce(l.ident,{name:E.name,description:E.description,images:E.images,price:E.price,discount:E.discount});case 5:a=e.sent,c(a.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),b.a.error(e.t0.message);case 12:f(Object(S.a)(Object(S.a)({},E),{},{loading:!1}));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(ee,{visible:t},r.a.createElement(te,null,r.a.createElement("h5",{class:"modal-title"},"Update product"),r.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:a},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("form",{onSubmit:g},r.a.createElement(ae,null,r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"categoryName",class:"col-sm-3 col-form-label"},"Name"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement("input",{type:"text",class:"form-control",id:"categoryName",value:E.name,onChange:function(e){return v("name",e.target.value)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"categoryDescription",class:"col-sm-3 col-form-label"},"Description"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement("textarea",{required:"",class:"form-control",rows:"3",id:"categoryDescription",value:E.description,onChange:function(e){return v("description",e.target.value)}}))),ie([w],s.role)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"productPrice",class:"col-sm-3 col-form-label"},"Price"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement("input",{type:"number",class:"form-control",id:"productPrice",value:E.price,onChange:function(e){return v("price",e.target.value)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"productDiscount",class:"col-sm-3 col-form-label"},"Discount"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement("input",{type:"number",class:"form-control",id:"productDiscount",value:E.discount,onChange:function(e){return v("discount",e.target.value)}})))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"categoryImage",class:"col-sm-3 col-form-label"},"Image"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement(X,{initFiles:E.images,onUploaded:function(e){v("images",e)}})))),r.a.createElement(ne,null,r.a.createElement("button",{type:"button",class:"btn btn-secondary",onClick:a},"Close"),r.a.createElement("button",{type:"submit",class:"btn btn-primary w-md"},E.loading&&r.a.createElement("i",{class:"bx bx-loader bx-spin font-size-16 align-middle mr-2"}),"Submit"))))}var Me=de((function(e){var t=Object(o.useRecoilValue)(O),a=ge(),l=Object(u.a)(a,2),c=l[0],s=(l[1],Object(n.useState)({openModalDetail:!1,openModalUpdate:!1,productSelected:{},products:[],total:0,page:1,name:"",category:"",discount:"",origin:"",type:"",loading:!1,syncLoading:!1})),d=Object(u.a)(s,2),p=d[0],E=d[1],f=function(e,t){E(Object(S.a)(Object(S.a)({},p),{},Object(q.a)({},e,t)))},v=function(){var e=Object(m.a)(i.a.mark((function e(t,a,n,r,l,c){var o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(Object(S.a)(Object(S.a)({},p),{},{loading:!0,page:t})),o=Object(S.a)(Object(S.a)({},p),{},{loading:!0,page:t}),e.prev=2,e.next=5,je(20,t,a,n,r,l,c);case 5:s=e.sent,o.products=s.data.products,o.total=s.data.total,o.loading=!1,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),o.loading=!1,b.a.error(e.t0.message);case 15:E(o);case 16:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,a,n,r,l,c){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){v(1,p.name,p.category,p.discount,p.origin,p.type)}),[]);var g=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(S.a)(Object(S.a)({},p),{},{loading:!0}),e.prev=1,e.next=4,ke(t);case 4:e.sent,a.loading=!1,a.products=p.products.filter((function(e){return e.ident!==t})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),a.loading=!1,b.a.error(e.t0.message);case 13:E(a);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(S.a)(Object(S.a)({},p),{},{syncLoading:!0}),e.prev=1,e.next=4,Se();case 4:return e.sent,t.syncLoading=!1,b.a.success("\u0110\u1ed3ng b\u1ed9 s\u1ea3n ph\u1ea9m th\xe0nh c\xf4ng"),e.next=9,v(p.page,p.name,p.category,p.discount,p.origin,p.type);case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),t.syncLoading=!1,b.a.error(e.t0.message);case 15:E(t);case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,p.openModalDetail&&r.a.createElement(Ne,{visible:p.openModalDetail,product:p.productSelected,onClose:function(){E(Object(S.a)(Object(S.a)({},p),{},{openModalDetail:!1,productSelected:{}}))}}),p.openModalUpdate&&r.a.createElement(De,{visible:p.openModalUpdate,product:p.productSelected,onClose:function(){E(Object(S.a)(Object(S.a)({},p),{},{openModalUpdate:!1,productSelected:{}}))},onUpdated:function(e){E(Object(S.a)(Object(S.a)({},p),{},{openModalUpdate:!1,productSelected:{},products:p.products.map((function(t){return t.ident===e.ident?e:t}))}))}}),r.a.createElement("div",{class:"page-content"},r.a.createElement("div",{class:"container-fluid"},r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"col-12"},r.a.createElement("div",{class:"page-title-box d-flex align-items-center justify-content-between"},r.a.createElement("h4",{class:"mb-0 font-size-18"},"Products List"),r.a.createElement("div",{class:"page-title-right"},ie([w],t.role)&&r.a.createElement("button",{type:"submit",class:"btn btn-primary w-md",onClick:h},p.syncLoading?r.a.createElement("i",{class:"bx bx-loader bx-spin font-size-16 align-middle mr-2"}):r.a.createElement("i",{class:"bx bx-sync font-size-16 align-middle mr-2"}),"\u0110\u1ed3ng b\u1ed9 s\u1ea3n ph\u1ea9m"))))),r.a.createElement("div",{class:"row"},r.a.createElement("div",{className:"col-lg-3"},r.a.createElement("div",{class:"card"},r.a.createElement("div",{class:"card-body"},r.a.createElement("h4",{class:"card-title mb-4"},"Filter"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),v(1,p.name,p.category,p.discount,p.origin,p.type)}},r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{for:"ategory-select"},"Chuy\xean m\u1ee5c s\u1ea3n ph\u1ea9m"),r.a.createElement("select",{class:"form-control",id:"category-select",value:p.category,onChange:function(e){return f("category",e.target.value)}},r.a.createElement("option",{value:""},"T\u1ea5t c\u1ea3"),c.map((function(e){return r.a.createElement("option",{key:e._id,value:e._id},e.name)})))),r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{for:"type-select"},"Lo\u1ea1i"),r.a.createElement("select",{class:"form-control",id:"type-select",value:p.type,onChange:function(e){return f("type",e.target.value)}},r.a.createElement("option",{value:""},"B\u1ea5t k\u1ef3 Lo\u1ea1i vang"),r.a.createElement("option",{value:"vang \u0111\u1ecf"},"Vang \u0111\u1ecf"),r.a.createElement("option",{value:"vang h\u1ed3ng"},"Vang h\u1ed3ng"),r.a.createElement("option",{value:"vang n\u1ed5"},"Vang n\u1ed5"),r.a.createElement("option",{value:"vang tr\u1eafng"},"Vang tr\u1eafng"))),r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{for:"origin-select"},"Xu\u1ea5t x\u1ee9"),r.a.createElement("select",{class:"form-control",id:"origin-select",value:p.origin,onChange:function(e){return f("origin",e.target.value)}},r.a.createElement("option",{value:""},"B\u1ea5t k\u1ef3 Ngu\u1ed3n g\u1ed1c vang"),r.a.createElement("option",{value:"\u0111\u1ee9c"},"\u0110\u1ee9c"),r.a.createElement("option",{value:"hungary"},"Hungary"),r.a.createElement("option",{value:"new zealand"},"New Zealand"),r.a.createElement("option",{value:"nga"},"Nga"),r.a.createElement("option",{value:"ph\xe1p"},"Ph\xe1p"),r.a.createElement("option",{value:"scotland"},"Scotland"),r.a.createElement("option",{value:"vi\u1ec7t nam"},"Vi\u1ec7t Nam"))),r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{for:"discount-select"},"Gi\u1ea3m gi\xe1"),r.a.createElement("select",{class:"form-control",id:"discount-select",value:p.discount,onChange:function(e){return f("discount",e.target.value)}},r.a.createElement("option",{value:""},"Kh\xf4ng"),r.a.createElement("option",{value:"true"},"\u0110ang gi\u1ea3m gi\xe1"))),r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{for:"name-select"},"T\xean"),r.a.createElement("input",{class:"form-control",type:"text",id:"name-select",value:p.name,onChange:function(e){return f("name",e.target.value)}})),r.a.createElement("button",{type:"submit",class:"btn btn-primary"},"T\xecm ki\u1ebfm"))))),r.a.createElement("div",{class:"col-lg-9"},r.a.createElement("div",{class:""},r.a.createElement("div",{class:"table-responsive"},r.a.createElement("table",{class:"table project-list-table table-nowrap table-centered table-borderless"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col",style:{width:"100px"}},"#"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Discount"),r.a.createElement("th",null,"Ident"),r.a.createElement("th",null,"View Details"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,p.products.map((function(e,a){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,r.a.createElement("img",{src:(e.images||[])[0],alt:"",class:"avatar-sm"})),r.a.createElement("td",null,r.a.createElement("h5",{class:"text-truncate font-size-14",style:{maxWidth:"300px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},r.a.createElement("a",{href:"#",class:"text-dark"},e.name)),r.a.createElement("p",{class:"text-muted mb-0",style:{maxWidth:"300px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},e.description)),r.a.createElement("td",null,Oe()(e.price).format("0,0")),r.a.createElement("td",null,Oe()(e.discount).format("0,0")),r.a.createElement("td",null,e.ident),r.a.createElement("td",null,r.a.createElement("button",{type:"button",class:"btn btn-primary btn-sm btn-rounded",onClick:function(){E(Object(S.a)(Object(S.a)({},p),{},{openModalDetail:!0,productSelected:e}))}},"View Details")),r.a.createElement("td",null,r.a.createElement("div",{class:"dropdown"},r.a.createElement("a",{href:"#",class:"dropdown-toggle card-drop","data-toggle":"dropdown","aria-expanded":"false"},r.a.createElement("i",{class:"mdi mdi-dots-horizontal font-size-18"})),r.a.createElement("ul",{class:"dropdown-menu dropdown-menu-right"},ie([w,y,"B3_MOD","SALE_STAFF"],t.role)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){E(Object(S.a)(Object(S.a)({},p),{},{openModalUpdate:!0,productSelected:e}))},class:"dropdown-item"},r.a.createElement("i",{class:"mdi mdi-pencil font-size-16 text-success mr-1"})," ","Edit")),ie([w],t.role)&&r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){return g(e.ident)},class:"dropdown-item"},r.a.createElement("i",{class:"mdi mdi-trash-can font-size-16 text-danger mr-1"})," ","Delete")))))))}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement(Y.a,{previousLabel:r.a.createElement("i",{class:"mdi mdi-chevron-left"}),nextLabel:r.a.createElement("i",{class:"mdi mdi-chevron-right"}),forcePage:p.page-1,breakLabel:"...",breakClassName:"break-me",pageCount:Math.ceil(p.total/20),marginPagesDisplayed:2,pageRangeDisplayed:2,onPageChange:function(e){v(e.selected+1,p.name,p.category,p.discount,p.origin,p.type)},containerClassName:"pagination pagination-rounded justify-content-center mt-4",pageClassName:"page-item",previousClassName:"page-item",nextClassName:"page-item",activeClassName:"active",pageLinkClassName:"page-link",previousLinkClassName:"page-link",nextLinkClassName:"page-link"})))))))))})),Te=a(177),Fe=a.n(Te),Pe=a(116),Ae=a.n(Pe),ze=Object(o.atom)({key:"posState",default:[]}),Le=function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/pos");case 3:return t=e.sent,e.abrupt("return",t);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/pos",{method:"POST",body:JSON.stringify(t)});case 3:return a=e.sent,e.abrupt("return",a);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),_e=function(){var e=Object(m.a)(i.a.mark((function e(t,a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/pos/".concat(t),{method:"PUT",body:JSON.stringify(a)});case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/pos/".concat(t),{method:"DELETE"});case 3:return a=e.sent,e.abrupt("return",a);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Ve=function(){var e=Object(o.useRecoilState)(ze),t=Object(u.a)(e,2),a=t[0],r=t[1],l=function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Le();case 3:t=e.sent,r(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),b.a.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){a.length||l()}),[]),[a,r]},Re=function(){var e=Object(m.a)(i.a.mark((function e(t,a,n,r,l,c){var o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/order?limit=".concat(t,"&page=").concat(a,"&name=").concat(n,"&status=").concat(r,"&paymentMethod=").concat(l,"&paid=").concat(c));case 3:return o=e.sent,e.abrupt("return",o);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a,n,r,l,c){return e.apply(this,arguments)}}(),Be=function(){var e=Object(m.a)(i.a.mark((function e(t,a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/order/".concat(t),{method:"PUT",body:JSON.stringify(a)});case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),Je=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/order/".concat(t),{method:"DELETE"});case 3:return a=e.sent,e.abrupt("return",a);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),qe=function(){var e=Object(m.a)(i.a.mark((function e(t,a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/order/push-to-pos",{method:"POST",body:JSON.stringify({posId:t,orderId:a})});case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}();function He(e){var t=e.visible,a=e.onClose,l=e.order,c=e.onUpdated,o=Ve(),s=Object(u.a)(o,1)[0],d=Object(n.useState)({loading:!1,pos:""}),p=Object(u.a)(d,2),E=p[0],f=p[1];Object(n.useEffect)((function(){E.pos||f(Object(S.a)(Object(S.a)({},E),{},{pos:(s[0]||{})._id||""}))}),[s]);var v=function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!E.loading){e.next=2;break}return e.abrupt("return");case 2:if(f(Object(S.a)(Object(S.a)({},E),{},{loading:!0})),e.prev=3,E.pos){e.next=7;break}return b.a.error("Vui l\xf2ng ch\u1ecdn POS"),e.abrupt("return");case 7:return e.next=9,qe(E.pos,l._id);case 9:t=e.sent,b.a.success("G\u1eedi \u0111\u1ebfn POS th\xe0nh c\xf4ng"),c(t.data),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),b.a.error(e.t0.message);case 17:f(Object(S.a)(Object(S.a)({},E),{},{loading:!1}));case 18:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(ee,{visible:t},r.a.createElement(te,null,r.a.createElement("h5",{class:"modal-title"},"Select pos"),r.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:a},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement(ae,null,r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"orderStatus",class:"col-sm-3 col-form-label"},"Pos"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement("select",{class:"form-control",id:"orderStatus",value:E.pos,onChange:function(e){return f(Object(S.a)(Object(S.a)({},E),{},{pos:e.target.value}))}},s.map((function(e){var t=e.name,a=e._id;return r.a.createElement("option",{value:a},t)})))))),r.a.createElement(ne,null,r.a.createElement("button",{type:"button",class:"btn btn-secondary",onClick:a},"Close"),r.a.createElement("button",{type:"submit",class:"btn btn-primary w-md",onClick:v},E.loading&&r.a.createElement("i",{class:"bx bx-loader bx-spin font-size-16 align-middle mr-2"}),"Submit")))}function Ye(e){var t=e.visible,a=e.onClose,n=e.order,l=Fe()((n.orderDetails||[]).map((function(e){return e.totalPrice}))),c=0;n.voucher&&n.voucher.value&&(c="percent"===n.voucher.type?l/100*n.voucher.value:n.voucher.value);var o=l-c;return r.a.createElement(ee,{visible:t},r.a.createElement(te,null,r.a.createElement("h5",{class:"modal-title"},"Order Details"),r.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:a},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement(ae,null,r.a.createElement("table",{class:"table table-centered table-nowrap"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("h5",{class:"text-truncate font-size-14"},"ID"))),r.a.createElement("th",{scope:"row"},n._id)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("h5",{class:"text-truncate font-size-14"},"Name"))),r.a.createElement("th",{scope:"row"},n.name)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("h5",{class:"text-truncate font-size-14"},"Phone"))),r.a.createElement("th",{scope:"row"},n.phone)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("h5",{class:"text-truncate font-size-14"},"Email"))),r.a.createElement("th",{scope:"row"},n.email)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("h5",{class:"text-truncate font-size-14"},"Address"))),r.a.createElement("th",{scope:"row"},n.shipAddress)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("h5",{class:"text-truncate font-size-14"},"City"))),r.a.createElement("th",{scope:"row"},n.shipCity)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("h5",{class:"text-truncate font-size-14"},"Note"))),r.a.createElement("th",{scope:"row"},n.note)),n.voucher&&n.voucher.value&&r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("h5",{class:"text-truncate font-size-14"},"Voucher"))),r.a.createElement("th",{scope:"row"},n.voucher.code)))),r.a.createElement("div",{class:"table-responsive"},r.a.createElement("table",{class:"table table-centered table-nowrap"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Product"),r.a.createElement("th",{scope:"col"},"Product Name"),r.a.createElement("th",{scope:"col"},"Price"))),r.a.createElement("tbody",null,n.orderDetails.map((function(e){var t=e.productId||{};return r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},r.a.createElement("div",null,r.a.createElement("img",{src:(t.images||[])[0],alt:"",class:"avatar-sm"}))),r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("h5",{class:"text-truncate font-size-14"},t.name),r.a.createElement("p",{class:"text-muted mb-0"},"x",e.quantity))),r.a.createElement("td",null,Oe()(e.totalPrice).format("0,0")))})),!!c&&r.a.createElement("tr",null,r.a.createElement("td",{colspan:"2"},r.a.createElement("h6",{class:"m-0 text-right"},"Discount:")),r.a.createElement("td",null,Oe()(c).format("0,0"))),r.a.createElement("tr",null,r.a.createElement("td",{colspan:"2"},r.a.createElement("h6",{class:"m-0 text-right"},"Total:")),r.a.createElement("td",null,Oe()(o).format("0,0"))))))),r.a.createElement(ne,null,r.a.createElement("button",{type:"button",class:"btn btn-secondary",onClick:a},"Close")))}function Ge(e){var t=e.visible,a=e.onClose,l=e.order,c=e.onUpdated,s=e.isCreate,d=Object(o.useRecoilValue)(O),p=Object(n.useState)({name:l.name||"",email:l.email||"",phone:l.phone||"",shipAddress:l.shipAddress||"",shipCity:l.shipCity||"",status:l.status||"",paid:l.paid||"",note:l.note||"",loading:!1}),E=Object(u.a)(p,2),f=E[0],v=E[1],g=function(e,t){v(Object(S.a)(Object(S.a)({},f),{},Object(q.a)({},e,t)))},h=function(){var e=Object(m.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v(Object(S.a)(Object(S.a)({},f),{},{loading:!0})),e.prev=1,t.preventDefault(),a={name:f.name,email:f.email,phone:f.phone,shipAddress:f.shipAddress,shipCity:f.shipCity,status:f.status,paid:f.paid,note:f.note},se(a),n={},!s){e.next=9;break}e.next=12;break;case 9:return e.next=11,Be(l._id,a);case 11:n=e.sent;case 12:c(n.data),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),b.a.error(e.t0.message);case 18:v(Object(S.a)(Object(S.a)({},f),{},{loading:!1}));case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(ee,{visible:t},r.a.createElement(te,null,r.a.createElement("h5",{class:"modal-title"},s?"Create order":"Update order"),r.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:a},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("form",{onSubmit:h},r.a.createElement(ae,null,r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"userName",class:"col-sm-3 col-form-label"},"Name"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement("input",{type:"text",class:"form-control",id:"userName",value:f.name,onChange:function(e){return g("name",e.target.value)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"userEmail",class:"col-sm-3 col-form-label"},"Email"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement("input",{type:"email",class:"form-control",id:"userEmail",value:f.email,onChange:function(e){return g("email",e.target.value)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"userPhone",class:"col-sm-3 col-form-label"},"Phone"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement("input",{type:"tel",class:"form-control",id:"userPhone",value:f.phone,onChange:function(e){return g("phone",e.target.value)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"userAddress",class:"col-sm-3 col-form-label"},"Address"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement("textarea",{required:"",class:"form-control",rows:"2",id:"userAddress",value:f.shipAddress,onChange:function(e){return g("shipAddress",e.target.value)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"userCity",class:"col-sm-3 col-form-label"},"City"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement("input",{type:"tel",class:"form-control",id:"userCity",value:f.shipCity,onChange:function(e){return g("shipCity",e.target.value)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"orderStatus",class:"col-sm-3 col-form-label"},"Status"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement("select",{class:"form-control",id:"orderStatus",value:f.status,onChange:function(e){return g("status",e.target.value)}},r.a.createElement("option",{value:""},"Ch\u01b0a x\u1eed l\xfd"),r.a.createElement("option",{value:"Processing"},"\u0110ang x\u1eed l\xfd"),r.a.createElement("option",{value:"Shipped"},"\u0110ang giao h\xe0ng"),r.a.createElement("option",{value:"Delivered"},"\u0110\xe3 nh\u1eadn"),r.a.createElement("option",{value:"Cancelled"},"\u0110\xe3 H\u1ee7y")))),ie([w,y],d.role)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"orderpaid",class:"col-sm-3 col-form-label"},"Tr\u1ea1ng th\xe1i thanh to\xe1n"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement("select",{class:"form-control",id:"orderpaid",value:f.paid,onChange:function(e){return g("paid",e.target.value)}},r.a.createElement("option",{value:""},"Ch\u01b0a thanh to\xe1n"),r.a.createElement("option",{value:"true"},"\u0110\xe3 thanh to\xe1n")))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"orderNote",class:"col-sm-3 col-form-label"},"Note"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement("textarea",{required:"",class:"form-control",rows:"2",id:"orderNote",value:f.note,onChange:function(e){return g("note",e.target.value)}}))))),r.a.createElement(ne,null,r.a.createElement("button",{type:"button",class:"btn btn-secondary",onClick:a},"Close"),r.a.createElement("button",{type:"submit",class:"btn btn-primary w-md"},f.loading&&r.a.createElement("i",{class:"bx bx-loader bx-spin font-size-16 align-middle mr-2"}),"Submit"))))}var We=de((function(e){var t=Object(o.useRecoilValue)(O),a=Object(n.useState)({openModalSelectPos:!1,openModalCreate:!1,openModalUpdate:!1,orderSelected:{},orders:[],total:0,page:1,name:"",status:"",paymentMethod:"",paid:0,loading:!1}),l=Object(u.a)(a,2),c=l[0],s=l[1],d=function(e,t){s(Object(S.a)(Object(S.a)({},c),{},Object(q.a)({},e,t)))},p=function(){var e=Object(m.a)(i.a.mark((function e(t,a,n,r,l){var o,m;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(Object(S.a)(Object(S.a)({},c),{},{loading:!0,page:t})),o=Object(S.a)(Object(S.a)({},c),{},{loading:!0,page:t}),e.prev=2,e.next=5,Re(20,t,a,n,r,l);case 5:m=e.sent,o.orders=m.data.orders,o.total=m.data.total,o.loading=!1,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),o.loading=!1,b.a.error(e.t0.message);case 15:s(o);case 16:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,a,n,r,l){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){p(1,c.name,c.status,c.paymentMethod,c.paid)}),[]);var E=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(S.a)(Object(S.a)({},c),{},{loading:!0}),e.prev=1,e.next=4,Je(t);case 4:e.sent,a.loading=!1,a.orders=c.orders.filter((function(e){return e._id!==t})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),a.loading=!1,b.a.error(e.t0.message);case 13:s(a);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,c.openModalSelectPos&&r.a.createElement(He,{visible:c.openModalSelectPos,order:c.orderSelected,onClose:function(){s(Object(S.a)(Object(S.a)({},c),{},{openModalSelectPos:!1,orderSelected:{}}))},onUpdated:function(e){c.openModalCreate?s(Object(S.a)(Object(S.a)({},c),{},{openModalCreate:!1,orders:20===c.orders.length?[e].concat(Object(J.a)(c.orders)).slice(0,-1):[e].concat(Object(J.a)(c.orders))})):s(Object(S.a)(Object(S.a)({},c),{},{openModalUpdate:!1,orderSelected:{},orders:c.orders.map((function(t){return t._id===e._id?e:t}))}))}}),c.openModalDetail&&r.a.createElement(Ye,{visible:c.openModalDetail,order:c.orderSelected,onClose:function(){s(Object(S.a)(Object(S.a)({},c),{},{openModalDetail:!1,orderSelected:{}}))}}),(c.openModalUpdate||c.openModalCreate)&&r.a.createElement(Ge,{isCreate:c.openModalCreate,visible:c.openModalUpdate||c.openModalCreate,order:c.orderSelected,onClose:function(){s(Object(S.a)(Object(S.a)({},c),{},{openModalUpdate:!1,openModalCreate:!1,orderSelected:{}}))},onUpdated:function(e){c.openModalCreate?s(Object(S.a)(Object(S.a)({},c),{},{openModalCreate:!1,orders:20===c.orders.length?[e].concat(Object(J.a)(c.orders)).slice(0,-1):[e].concat(Object(J.a)(c.orders))})):s(Object(S.a)(Object(S.a)({},c),{},{openModalUpdate:!1,orderSelected:{},orders:c.orders.map((function(t){return t._id===e._id?e:t}))}))}}),r.a.createElement("div",{className:"page-content"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"page-title-box d-flex align-items-center justify-content-between"},r.a.createElement("h4",{className:"mb-0 font-size-18"},"Orders List")))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-2"},r.a.createElement("div",{class:"card"},r.a.createElement("div",{class:"card-body"},r.a.createElement("h4",{class:"card-title mb-4"},"Filter"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),p(1,c.name,c.status,c.paymentMethod,c.paid)}},r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{for:"status-select"},"Tr\u1ea1ng th\xe1i"),r.a.createElement("select",{class:"form-control",id:"status-select",value:c.status,onChange:function(e){return d("status",e.target.value)}},r.a.createElement("option",{value:""},"T\u1ea5t c\u1ea3"),r.a.createElement("option",{value:"Not processed"},"Ch\u01b0a x\u1eed l\xfd"),r.a.createElement("option",{value:"Processing"},"\u0110ang x\u1eed l\xfd"),r.a.createElement("option",{value:"Shipped"},"\u0110ang giao h\xe0ng"),r.a.createElement("option",{value:"Delivered"},"\u0110\xe3 nh\u1eadn"),r.a.createElement("option",{value:"Cancelled"},"\u0110\xe3 H\u1ee7y"))),r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{for:"paymentMethod-select"},"Ph\u01b0\u01a1ng th\u1ee9c thanh to\xe1n"),r.a.createElement("select",{class:"form-control",id:"paymentMethod-select",value:c.paymentMethod,onChange:function(e){return d("paymentMethod",e.target.value)}},r.a.createElement("option",{value:""},"T\u1ea5t c\u1ea3"),r.a.createElement("option",{value:"cod"},"Cod"),r.a.createElement("option",{value:"vnpay"},"VNPay"))),r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{for:"paid-select"},"Tr\u1ea1ng th\xe1i thanh to\xe1n"),r.a.createElement("select",{class:"form-control",id:"paid-select",value:c.paid,onChange:function(e){return d("paid",e.target.value)}},r.a.createElement("option",{value:0},"T\u1ea5t c\u1ea3"),r.a.createElement("option",{value:1},"Ch\u01b0a thanh to\xe1n"),r.a.createElement("option",{value:2},"\u0110\xe3 thanh to\xe1n"))),r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{for:"name-select"},"T\xean"),r.a.createElement("input",{class:"form-control",type:"text",id:"name-select",value:c.name,onChange:function(e){return d("name",e.target.value)}})),r.a.createElement("button",{type:"submit",class:"btn btn-primary"},"T\xecm ki\u1ebfm"))))),r.a.createElement("div",{className:"col-lg-10"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-centered table-nowrap table-hover"},r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col",style:{width:"70px"}},"#ID"),r.a.createElement("th",{scope:"col"},"Name"),r.a.createElement("th",{scope:"col"},"Th\u1eddi gian"),r.a.createElement("th",{scope:"col"},"T\u1ed5ng ti\u1ec1n"),r.a.createElement("th",{scope:"col"},"Tr\u1ea1ng th\xe1i"),r.a.createElement("th",{scope:"col"},"H\xecnh th\u1ee9c thanh to\xe1n"),r.a.createElement("th",{scope:"col"},"Chi ti\u1ebft"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,c.orders.map((function(e,a){var n=Fe()((e.orderDetails||[]).map((function(e){return e.totalPrice}))),l=0;e.voucher&&e.voucher.value&&(l="percent"===e.voucher.type?n/100*e.voucher.value:e.voucher.value);var o=n-l;return r.a.createElement("tr",{key:e.lid},r.a.createElement("td",null,r.a.createElement("b",null,e.lid)),r.a.createElement("td",null,r.a.createElement("h5",{className:"font-size-14 mb-1"},r.a.createElement("a",{className:"text-dark"},e.name)),r.a.createElement("p",{className:"text-muted mb-0"},e.address)),r.a.createElement("td",null,Ae()(e.createdAt).format("hh:mm DD-MM-YYYY")),r.a.createElement("td",null,Oe()(o).format("0,0")),r.a.createElement("td",null,"Not processed"===e.status?r.a.createElement("span",{class:"badge badge-pill badge-soft-warning font-size-12"},e.status):"Cancelled"===e.status?r.a.createElement("span",{class:"badge badge-pill badge-soft-danger font-size-12"},e.status):r.a.createElement("span",{class:"badge badge-pill badge-soft-success font-size-12"},e.status)),r.a.createElement("td",null,"cod"===e.paymentMethod?r.a.createElement("i",{class:"fas fa-money-bill-alt mr-1"}):"vnpay"===e.paymentMethod?r.a.createElement("i",{class:"bx bx-credit-card"}):void 0," ",e.paymentMethod," /"," ",e.paid?"\u0110\xe3 thanh to\xe1n":"Ch\u01b0a thanh to\xe1n"),r.a.createElement("td",null,r.a.createElement("button",{type:"button",class:"btn btn-primary btn-sm btn-rounded",onClick:function(){s(Object(S.a)(Object(S.a)({},c),{},{openModalDetail:!0,orderSelected:e}))}},"View Details")),r.a.createElement("td",null,r.a.createElement("div",{class:"dropdown"},r.a.createElement("a",{class:"dropdown-toggle card-drop","data-toggle":"dropdown","aria-expanded":"false"},r.a.createElement("i",{class:"mdi mdi-dots-horizontal font-size-18"})),r.a.createElement("ul",{className:"dropdown-menu dropdown-menu-right"},ie([w,y,"SALE_STAFF","CS_STAFF"],t.role)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){s(Object(S.a)(Object(S.a)({},c),{},{openModalSelectPos:!0,orderSelected:e}))},class:"dropdown-item"},r.a.createElement("i",{class:"bx bx-send font-size-16 text-success mr-1"})," ","G\u1eedi \u0111\u1ebfn POS")),r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){s(Object(S.a)(Object(S.a)({},c),{},{openModalUpdate:!0,orderSelected:e}))},class:"dropdown-item"},r.a.createElement("i",{class:"mdi mdi-pencil font-size-16 text-success mr-1"})," ","Ch\u1ec9nh s\u1eeda")),ie([w,y],t.role)&&r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){return E(e._id)},class:"dropdown-item"},r.a.createElement("i",{class:"mdi mdi-trash-can font-size-16 text-danger mr-1"})," ","X\xf3a")))))))}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement(Y.a,{previousLabel:r.a.createElement("i",{class:"mdi mdi-chevron-left"}),nextLabel:r.a.createElement("i",{class:"mdi mdi-chevron-right"}),forcePage:c.page-1,breakLabel:"...",breakClassName:"break-me",pageCount:Math.ceil(c.total/20),marginPagesDisplayed:2,pageRangeDisplayed:2,onPageChange:function(e){p(e.selected+1,c.name,c.status,c.paymentMethod,c.paid)},containerClassName:"pagination pagination-rounded justify-content-center mt-4",pageClassName:"page-item",previousClassName:"page-item",nextClassName:"page-item",activeClassName:"active",pageLinkClassName:"page-link",previousLinkClassName:"page-link",nextLinkClassName:"page-link"}))))))))))})),Ke=a(82),Ze=a(83),Xe=a.n(Ze),$e=function(){var e=Object(m.a)(i.a.mark((function e(t,a,n,r){var l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/post?limit=".concat(t,"&page=").concat(a,"&type=").concat(n,"&name=").concat(r));case 3:return l=e.sent,e.abrupt("return",l);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a,n,r){return e.apply(this,arguments)}}(),Qe=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/post/".concat(t));case 3:return a=e.sent,e.abrupt("return",a);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),et=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/post",{method:"POST",body:JSON.stringify(t)});case 3:return a=e.sent,e.abrupt("return",a);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),tt=function(){var e=Object(m.a)(i.a.mark((function e(t,a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/post/".concat(t),{method:"PUT",body:JSON.stringify(a)});case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),at=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/post/".concat(t),{method:"DELETE"});case 3:return a=e.sent,e.abrupt("return",a);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();var nt=de((function(e){var t=Object(p.g)(),a=Object(p.h)().postSlug,l=Object(n.useState)({title:"",description:"",content:"",type:"",image:"",video:"",startedAt:"",endedAt:"",fetched:!0}),c=Object(u.a)(l,2),o=c[0],s=c[1],d=function(e,t){s(Object(S.a)(Object(S.a)({},o),{},Object(q.a)({},e,t)))},E=function(){var e=Object(m.a)(i.a.mark((function e(n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),e.prev=1,r={title:o.title,description:o.description,content:o.content,type:o.type,image:o.image,video:o.video,startedAt:o.startedAt,endedAt:o.endedAt},se(r),!a){e.next=11;break}return e.next=7,tt(a,r);case 7:e.sent,b.a.success("C\u1eadp nh\u1eadt b\xe0i vi\u1ebft th\xe0nh c\xf4ng"),e.next=15;break;case 11:return e.next=13,et(r);case 13:e.sent,b.a.success("Th\xeam b\xe0i vi\u1ebft th\xe0nh c\xf4ng");case 15:t.push("/posts"),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),b.a.error(e.t0.message);case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(m.a)(i.a.mark((function e(t){var a,n,r,l,c,m,u,d,p,E;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(Object(S.a)(Object(S.a)({},o),{},{fetched:!1})),e.prev=1,e.next=4,Qe(t);case 4:a=e.sent,n=a.data,r=n.title,l=n.description,c=n.content,m=n.type,u=n.image,d=n.video,p=n.startedAt,E=n.endedAt,s(Object(S.a)(Object(S.a)({},o),{},{title:r,description:l,content:c,type:m,image:u,video:d,startedAt:new Date(p),endedAt:new Date(E),fetched:!0})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),s(Object(S.a)(Object(S.a)({},o),{},{fetched:!0})),b.a.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){a&&f(a)}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{class:"page-content"},r.a.createElement("div",{class:"container-fluid"},r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"col-12"},r.a.createElement("div",{class:"page-title-box d-flex align-items-center justify-content-between"},r.a.createElement("h4",{class:"mb-0 font-size-18"},a?"Update post":"Create Post")))),r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"col-lg-12"},r.a.createElement("div",{class:"card"},r.a.createElement("div",{class:"card-body"},r.a.createElement("h4",{class:"card-title mb-4"},a?"Update post":"Create New Post"),o.fetched&&r.a.createElement("form",{class:"outer-repeater",onSubmit:E},r.a.createElement("div",{"data-repeater-list":"outer-group",class:"outer"},r.a.createElement("div",{"data-repeater-item":!0,class:"outer"},r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"post-type",class:"col-form-label col-lg-2"},"Type"),r.a.createElement("div",{class:"col-lg-10"},r.a.createElement("select",{class:"form-control",id:"post-type",value:o.type,onChange:function(e){return d("type",e.target.value)}},r.a.createElement("option",{value:""},"Blog"),r.a.createElement("option",{value:"video"},"Video"),r.a.createElement("option",{value:"faq"},"Faq"),r.a.createElement("option",{value:"event"},"Event")))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"post-title",class:"col-form-label col-lg-2"},"Title"),r.a.createElement("div",{class:"col-lg-10"},r.a.createElement("input",{id:"post-title",name:"title",type:"text",class:"form-control",placeholder:"Enter Title...",value:o.title,onChange:function(e){return d("title",e.target.value)}}))),"video"===o.type?r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"post-video",class:"col-form-label col-lg-2"},"Video Url"),r.a.createElement("div",{class:"col-lg-10"},r.a.createElement("input",{id:"post-video",name:"video",type:"text",class:"form-control",placeholder:"Enter Video Url...",value:o.video,onChange:function(e){return d("video",e.target.value)}}))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"post-description",class:"col-form-label col-lg-2"},"Description"),r.a.createElement("div",{class:"col-lg-10"},r.a.createElement("textarea",{class:"form-control",rows:"2",id:"post-description",placeholder:"Enter Task Desctiption...",value:o.description,onChange:function(e){return d("description",e.target.value)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{class:"col-form-label col-lg-2"},"Content"),r.a.createElement("div",{class:"col-lg-10"},r.a.createElement(Ke.CKEditor,{config:{height:200},editor:Xe.a,data:o.content,onChange:function(e,t){var a=t.getData();d("content",a)}})))),"event"===o.type&&r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{class:"col-form-label col-lg-2"},"Event date"),r.a.createElement("div",{class:"col-lg-10"},r.a.createElement("div",{class:"input-daterange input-group"},r.a.createElement(W.a,{dateFormat:"dd/MM/yyyy",className:"form-control",selected:o.startedAt,onChange:function(e){d("startedAt",e)}}),r.a.createElement(W.a,{dateFormat:"dd/MM/yyyy",className:"form-control",selected:o.endedAt,onChange:function(e){d("endedAt",e)}})))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"taskbudget",class:"col-form-label col-lg-2"},"Image"),r.a.createElement("div",{class:"col-lg-10"},r.a.createElement(X,{initFiles:[o.image],onUploaded:function(e){d("image",e[0])},maxFiles:1})))),r.a.createElement("div",{class:"row justify-content-end"},r.a.createElement("div",{class:"col-lg-10"},r.a.createElement("button",{type:"submit",class:"btn btn-primary"},"Save"))))))))))))})),rt=function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/config");case 3:return t=e.sent,e.abrupt("return",t);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),lt=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/config",{method:"PUT",body:JSON.stringify(t)});case 3:return a=e.sent,e.abrupt("return",a);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),ct=function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/tasty");case 3:return t=e.sent,e.abrupt("return",t);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),ot=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/tasty",{method:"PUT",body:JSON.stringify(t)});case 3:return a=e.sent,e.abrupt("return",a);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),st=function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/about-us");case 3:return t=e.sent,e.abrupt("return",t);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),it=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/about-us",{method:"PUT",body:JSON.stringify(t)});case 3:return a=e.sent,e.abrupt("return",a);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();var mt=de((function(e){var t=Object(o.useRecoilValue)(O),a=Object(n.useState)({banners:[],slogan:"",description:"",ctaImage:"",ctaTitle:"",ctaDescription:"",ctaUrl:"",loading:!1}),l=Object(u.a)(a,2),c=l[0],s=l[1],d=function(){var e=Object(m.a)(i.a.mark((function e(){var t,a,n,r,l,o,m,u,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Object(S.a)(Object(S.a)({},c),{},{loading:!0})),e.next=4,rt();case 4:t=e.sent,a=t.data,n=a.banners,r=a.slogan,l=a.description,o=a.ctaImage,m=a.ctaTitle,u=a.ctaDescription,d=a.ctaUrl,s(Object(S.a)(Object(S.a)({},c),{},{banners:n,slogan:r,description:l,ctaImage:o,ctaTitle:m,ctaDescription:u,ctaUrl:d,loading:!1})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),s(Object(S.a)(Object(S.a)({},c),{},{loading:!1})),b.a.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){d()}),[]);var p=function(e,t){s(Object(S.a)(Object(S.a)({},c),{},Object(q.a)({},e,t)))},E=function(){var e=Object(m.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),ie([w,"B3_MOD"],t.role)||b.a.error("You do not have permission to do this"),e.prev=2,e.next=5,lt({banners:c.banners,slogan:c.slogan,description:c.description,ctaImage:c.ctaImage,ctaTitle:c.ctaTitle,ctaDescription:c.ctaDescription,ctaUrl:c.ctaUrl});case 5:e.sent,b.a.success("C\u1eadp nh\u1eadt setting th\xe0nh c\xf4ng"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),b.a.error(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{class:"page-content"},r.a.createElement("div",{class:"container-fluid"},r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"col-12"},r.a.createElement("div",{class:"page-title-box d-flex align-items-center justify-content-between"},r.a.createElement("h4",{class:"mb-0 font-size-18"},"Settings")))),r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"col-lg-12"},r.a.createElement("div",{class:"card"},r.a.createElement("div",{class:"card-body"},r.a.createElement("h4",{class:"card-title mb-4"},"Settings"),!c.loading&&r.a.createElement("form",{class:"outer-repeater",onSubmit:E},r.a.createElement("div",{"data-repeater-list":"outer-group",class:"outer"},r.a.createElement("div",{"data-repeater-item":!0,class:"outer"},r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"taskbudget",class:"col-form-label col-lg-2"},"Banners"),r.a.createElement("div",{class:"col-lg-10"},r.a.createElement(X,{initFiles:c.banners,onUploaded:function(e){p("banners",e)},maxFiles:20}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"setting-slogan",class:"col-form-label col-lg-2"},"Slogan"),r.a.createElement("div",{class:"col-lg-10"},r.a.createElement("textarea",{class:"form-control",rows:"2",id:"setting-slogan",value:c.slogan,onChange:function(e){return p("slogan",e.target.value)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"setting-description",class:"col-form-label col-lg-2"},"Description"),r.a.createElement("div",{class:"col-lg-10"},r.a.createElement("textarea",{class:"form-control",rows:"3",id:"setting-description",value:c.description,onChange:function(e){return p("description",e.target.value)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"taskname",class:"col-form-label col-lg-2"},"CTA Image"),r.a.createElement("div",{class:"col-lg-10"},r.a.createElement(X,{initFiles:[c.ctaImage],onUploaded:function(e){p("ctaImage",e[0])},maxFiles:1}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"setting-cta-title",class:"col-form-label col-lg-2"},"CTA Title"),r.a.createElement("div",{class:"col-lg-10"},r.a.createElement("input",{id:"setting-cta-title",name:"taskname",type:"text",class:"form-control",placeholder:"Enter CTA Title...",value:c.ctaTitle,onChange:function(e){return p("ctaTitle",e.target.value)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"setting-cta-description",class:"col-form-label col-lg-2"},"CTA Description"),r.a.createElement("div",{class:"col-lg-10"},r.a.createElement("input",{id:"setting-cta-description",name:"taskname",type:"text",class:"form-control",placeholder:"Enter CTA Description...",value:c.ctaDescription,onChange:function(e){return p("ctaDescription",e.target.value)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"setting-cta-url",class:"col-form-label col-lg-2"},"CTA Url"),r.a.createElement("div",{class:"col-lg-10"},r.a.createElement("input",{id:"setting-cta-url",name:"taskname",type:"text",class:"form-control",placeholder:"Enter CTA Url...",value:c.ctaUrl,onChange:function(e){return p("ctaUrl",e.target.value)}})))),r.a.createElement("div",{class:"row justify-content-end"},r.a.createElement("div",{class:"col-lg-10"},r.a.createElement("button",{type:"submit",class:"btn btn-primary"},"Save")))))))))))}));var ut=de((function(e){var t=Object(o.useRecoilValue)(O),a=Object(p.g)(),l=Object(n.useState)({openModalCreate:!1,openModalUpdate:!1,userSelected:{},posts:[],total:0,page:1,type:"",name:"",loading:!1}),c=Object(u.a)(l,2),s=c[0],d=c[1],E=function(e,t){d(Object(S.a)(Object(S.a)({},s),{},Object(q.a)({},e,t)))},f=function(){var e=Object(m.a)(i.a.mark((function e(t,a,n){var r,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(Object(S.a)(Object(S.a)({},s),{},{loading:!0,page:t})),r=Object(S.a)(Object(S.a)({},s),{},{loading:!0,page:t}),e.prev=2,e.next=5,$e(20,t,a,n);case 5:l=e.sent,r.posts=l.data.posts,r.total=l.data.total,r.loading=!1,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),r.loading=!1,b.a.error(e.t0.message);case 15:d(r);case 16:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,a,n){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){f(1,s.type,s.name)}),[]);var v=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(S.a)(Object(S.a)({},s),{},{loading:!0}),e.prev=1,e.next=4,at(t);case 4:e.sent,a.loading=!1,a.posts=s.posts.filter((function(e){return e.slug!==t})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),a.loading=!1,b.a.error(e.t0.message);case 13:d(a);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"page-content"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"page-title-box d-flex align-items-center justify-content-between"},r.a.createElement("h4",{className:"mb-0 font-size-18"},"Post List"),ie([w,y,"B3_MOD"],t.role)&&r.a.createElement("div",{className:"page-title-right"},r.a.createElement("button",{type:"submit",class:"btn btn-primary w-md",onClick:function(){a.push("/create-post")}},"Th\xeam b\xe0i vi\u1ebft"))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-3"},r.a.createElement("div",{class:"card"},r.a.createElement("div",{class:"card-body"},r.a.createElement("h4",{class:"card-title mb-4"},"Filter"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),f(1,s.type,s.name)}},r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{for:"type-select"},"Lo\u1ea1i"),r.a.createElement("select",{class:"form-control",id:"type-select",value:s.type,onChange:function(e){return E("type",e.target.value)}},r.a.createElement("option",{value:""},"T\u1ea5t c\u1ea3"),r.a.createElement("option",{value:"article"},"Blog"),r.a.createElement("option",{value:"faq"},"Faq"),r.a.createElement("option",{value:"video"},"Video"),r.a.createElement("option",{value:"event"},"Event"))),r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{for:"name-select"},"T\xean"),r.a.createElement("input",{class:"form-control",type:"text",id:"name-select",value:s.name,onChange:function(e){return E("name",e.target.value)}})),r.a.createElement("button",{type:"submit",class:"btn btn-primary"},"T\xecm ki\u1ebfm"))))),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-centered table-nowrap table-hover"},r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col",style:{width:"70px"}},"#"),r.a.createElement("th",{scope:"col"},"Title"),r.a.createElement("th",{scope:"col"},"Type"),r.a.createElement("th",{scope:"col"},"Created time"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,s.posts.map((function(e,n){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,r.a.createElement("img",{class:"rounded-circle avatar-xs",src:e.image,alt:""})),r.a.createElement("td",null,r.a.createElement("h5",{className:"font-size-14 mb-1"},r.a.createElement("a",{className:"text-dark"},e.title)),r.a.createElement("p",{className:"text-muted mb-0"},e.description)),r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("a",{className:"badge badge-soft-primary font-size-11 m-1"},e.type))),r.a.createElement("td",null,e.createdAt),r.a.createElement("td",null,r.a.createElement("div",{class:"dropdown"},r.a.createElement("a",{class:"dropdown-toggle card-drop","data-toggle":"dropdown","aria-expanded":"false"},r.a.createElement("i",{class:"mdi mdi-dots-horizontal font-size-18"})),r.a.createElement("ul",{className:"dropdown-menu dropdown-menu-right"},ie([w,y,"B3_MOD"],t.role)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){a.push("/post/".concat(e.slug))},class:"dropdown-item"},r.a.createElement("i",{class:"mdi mdi-pencil font-size-16 text-success mr-1"})," ","Edit")),r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){return v(e.slug)},class:"dropdown-item"},r.a.createElement("i",{class:"mdi mdi-trash-can font-size-16 text-danger mr-1"})," ","Delete")))))))}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement(Y.a,{previousLabel:r.a.createElement("i",{class:"mdi mdi-chevron-left"}),nextLabel:r.a.createElement("i",{class:"mdi mdi-chevron-right"}),forcePage:s.page-1,breakLabel:"...",breakClassName:"break-me",pageCount:Math.ceil(s.total/20),marginPagesDisplayed:2,pageRangeDisplayed:2,onPageChange:function(e){f(e.selected+1,s.type,s.name)},containerClassName:"pagination pagination-rounded justify-content-center mt-4",pageClassName:"page-item",previousClassName:"page-item",nextClassName:"page-item",activeClassName:"active",pageLinkClassName:"page-link",previousLinkClassName:"page-link",nextLinkClassName:"page-link"}))))))))))})),dt=function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/page");case 3:return t=e.sent,e.abrupt("return",t);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),pt=function(){var e=Object(m.a)(i.a.mark((function e(t,a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/page/".concat(t),{method:"PUT",body:JSON.stringify(a)});case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),Et={name:"",type:"",content:""};var bt=de((function(e){var t=Object(o.useRecoilValue)(O),a=Object(n.useState)({pages:[],loading:!1,pageSelected:Et}),l=Object(u.a)(a,2),c=l[0],s=l[1],d=function(){var e=Object(m.a)(i.a.mark((function e(){var t,a,n,r,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Object(S.a)(Object(S.a)({},c),{},{loading:!0})),e.next=4,dt();case 4:t=e.sent,a=t.data||[],n=Object(u.a)(a,1),r=n[0],l=void 0===r?{}:r,s(Object(S.a)(Object(S.a)({},c),{},{loading:!1,pages:t.data,pageSelected:{name:l.name,type:l.type,content:l.content}})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),s({loading:!1}),b.a.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(m.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie([w,"B3_MOD"],t.role)||b.a.error("You do not have permission to do this"),e.prev=1,e.next=4,pt(c.pageSelected.type,c.pageSelected);case 4:e.sent,b.a.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng!"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),b.a.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){d()}),[]),r.a.createElement("div",{class:"page-content"},r.a.createElement("div",{class:"container-fluid"},r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"col-12"},r.a.createElement("div",{class:"page-title-box d-flex align-items-center justify-content-between"},r.a.createElement("h4",{class:"mb-0 font-size-18"},"Edit pages")))),r.a.createElement("div",{class:"row"},r.a.createElement("div",{className:"col-lg-3"},r.a.createElement("div",{class:"card"},r.a.createElement("div",{class:"card-body"},r.a.createElement("h4",{class:"card-title mb-4"},"Pages"),r.a.createElement("ul",{class:"list-unstyled megamenu-list"},c.pages.map((function(e){return r.a.createElement("li",{key:e.type,style:{marginBottom:"5px"}},r.a.createElement("b",{onClick:function(){return function(e){s(Object(S.a)(Object(S.a)({},c),{},{pageSelected:{name:e.name,type:e.type,content:e.content}}))}(e)},key:"t-lightbox",style:{cursor:"pointer"}},e.name))})))))),r.a.createElement("div",{class:"col-lg-9"},!c.loading&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"page-title-box d-flex align-items-center justify-content-between"},r.a.createElement("h4",{className:"mb-0 font-size-18"},c.pageSelected.name),r.a.createElement("button",{class:"btn btn-primary w-md",onClick:p},c.loading&&r.a.createElement("i",{class:"bx bx-loader bx-spin font-size-16 align-middle mr-2"}),"Save")),r.a.createElement("div",{class:"card"},r.a.createElement("div",{class:"card-body"},r.a.createElement(Ke.CKEditor,{config:{height:200},editor:Xe.a,data:c.pageSelected.content,onChange:function(e,t){},onBlur:function(e,t){console.log("on blur");var a,n=t.getData();a=n,s(Object(S.a)(Object(S.a)({},c),{},{pageSelected:Object(S.a)(Object(S.a)({},c.pageSelected),{},{content:a})}))}}))))))))})),ft=function(){var e=Object(m.a)(i.a.mark((function e(t,a,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/review/all?limit=".concat(t,"&page=").concat(a,"&name=").concat(n));case 3:return r=e.sent,e.abrupt("return",r);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a,n){return e.apply(this,arguments)}}(),vt=function(){var e=Object(m.a)(i.a.mark((function e(t,a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/review/".concat(t),{method:"PUT",body:JSON.stringify(a)});case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),gt=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/review/".concat(t),{method:"DELETE"});case 3:return a=e.sent,e.abrupt("return",a);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();function ht(e){var t=e.visible,a=e.onClose,n=e.feedback;return r.a.createElement(ee,{visible:t},r.a.createElement(te,null,r.a.createElement("h5",{class:"modal-title"},"Feedback Details"),r.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:a},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement(ae,null,r.a.createElement("table",{class:"table table-centered table-nowrap"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("h5",{class:"text-truncate font-size-14"},"ID"))),r.a.createElement("th",{scope:"row"},n._id)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("h5",{class:"text-truncate font-size-14"},"Name"))),r.a.createElement("th",{scope:"row"},n.name)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("h5",{class:"text-truncate font-size-14"},"Email"))),r.a.createElement("th",{scope:"row"},n.email)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("h5",{class:"text-truncate font-size-14"},"Title"))),r.a.createElement("th",{scope:"row"},n.title)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("h5",{class:"text-truncate font-size-14"},"Description"))),r.a.createElement("th",{scope:"row"},n.description)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("h5",{class:"text-truncate font-size-14"},"Product"))),r.a.createElement("th",{scope:"row"},(n.product||{}).name))))),r.a.createElement(ne,null,r.a.createElement("button",{type:"button",class:"btn btn-secondary",onClick:a},"Close")))}function yt(e){var t=e.visible,a=e.onClose,l=e.feedback,c=e.onUpdated,o=Object(n.useState)({name:l.name||"",email:l.email||"",title:l.title||"",description:l.description||""}),s=Object(u.a)(o,2),d=s[0],p=s[1],E=function(e,t){p(Object(S.a)(Object(S.a)({},d),{},Object(q.a)({},e,t)))},f=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(Object(S.a)(Object(S.a)({},d),{},{loading:!0})),e.prev=1,t.preventDefault(),e.next=5,vt(l._id,{name:d.name,email:d.email,title:d.title,description:d.description});case 5:a=e.sent,c(a.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),b.a.error(e.t0.message);case 12:p(Object(S.a)(Object(S.a)({},d),{},{loading:!1}));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(ee,{visible:t},r.a.createElement(te,null,r.a.createElement("h5",{class:"modal-title"},"Update feedback"),r.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:a},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("form",{onSubmit:f},r.a.createElement(ae,null,r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"feedbackName",class:"col-sm-3 col-form-label"},"Name"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement("input",{type:"text",class:"form-control",id:"feedbackName",value:d.name,onChange:function(e){return E("name",e.target.value)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"feedbackEmail",class:"col-sm-3 col-form-label"},"Email"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement("input",{type:"text",class:"form-control",id:"feedbackEmail",value:d.email,onChange:function(e){return E("email",e.target.value)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"feedbackTitle",class:"col-sm-3 col-form-label"},"Title"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement("input",{type:"text",class:"form-control",id:"feedbackTitle",value:d.title,onChange:function(e){return E("title",e.target.value)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"feedbackDescription",class:"col-sm-3 col-form-label"},"Description"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement("textarea",{required:"",class:"form-control",rows:"3",id:"feedbackDescription",value:d.description,onChange:function(e){return E("description",e.target.value)}})))),r.a.createElement(ne,null,r.a.createElement("button",{type:"button",class:"btn btn-secondary",onClick:a},"Close"),r.a.createElement("button",{type:"submit",class:"btn btn-primary w-md"},d.loading&&r.a.createElement("i",{class:"bx bx-loader bx-spin font-size-16 align-middle mr-2"}),"Submit"))))}var wt=de((function(e){var t=Object(o.useRecoilValue)(O),a=Object(n.useState)({openModalDetail:!1,openModalUpdate:!1,feedbackSelected:{},feedbacks:[],total:0,page:1,name:"",loading:!1}),l=Object(u.a)(a,2),c=l[0],s=l[1],d=function(){var e=Object(m.a)(i.a.mark((function e(t,a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(Object(S.a)(Object(S.a)({},c),{},{loading:!0,page:t})),n=Object(S.a)(Object(S.a)({},c),{},{loading:!0,page:t}),e.prev=2,e.next=5,ft(20,t,a);case 5:r=e.sent,n.feedbacks=r.data.reviews,n.total=r.data.total,n.loading=!1,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),n.loading=!1,b.a.error(e.t0.message);case 15:s(n);case 16:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,a){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){d(1,c.name)}),[]);var p=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(S.a)(Object(S.a)({},c),{},{loading:!0}),e.prev=1,e.next=4,gt(t);case 4:e.sent,a.loading=!1,a.feedbacks=c.feedbacks.filter((function(e){return e._id!==t})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),a.loading=!1,b.a.error(e.t0.message);case 13:s(a);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(m.a)(i.a.mark((function e(a,n){var r,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie([w,y],t.role)||b.a.error("You do not have permission to do this"),e.prev=1,e.next=4,vt(a,{isShow:n});case 4:r=e.sent,l=r.data||{},s(Object(S.a)(Object(S.a)({},c),{},{feedbacks:c.feedbacks.map((function(e){return e._id===l._id?l:e}))})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),b.a.error(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,c.openModalDetail&&r.a.createElement(ht,{visible:c.openModalDetail,feedback:c.feedbackSelected,onClose:function(){s(Object(S.a)(Object(S.a)({},c),{},{openModalDetail:!1,feedbackSelected:{}}))}}),c.openModalUpdate&&r.a.createElement(yt,{visible:c.openModalUpdate,feedback:c.feedbackSelected,onClose:function(){s(Object(S.a)(Object(S.a)({},c),{},{openModalUpdate:!1,feedbackSelected:{}}))},onUpdated:function(e){s(Object(S.a)(Object(S.a)({},c),{},{openModalUpdate:!1,feedbackSelected:{},feedbacks:c.feedbacks.map((function(t){return t._id===e._id?e:t}))}))}}),r.a.createElement("div",{class:"page-content"},r.a.createElement("div",{class:"container-fluid"},r.a.createElement("div",{class:"row"},r.a.createElement("div",{className:"col-lg-3"},r.a.createElement("div",{class:"card"},r.a.createElement("div",{class:"card-body"},r.a.createElement("h4",{class:"card-title mb-4"},"Filter"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),d(1,c.name)}},r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{for:"name-select"},"T\xean"),r.a.createElement("input",{class:"form-control",type:"text",id:"name-select",value:c.name,onChange:function(e){var t,a;t="name",a=e.target.value,s(Object(S.a)(Object(S.a)({},c),{},Object(q.a)({},t,a)))}})),r.a.createElement("button",{type:"submit",class:"btn btn-primary"},"T\xecm ki\u1ebfm"))))),r.a.createElement("div",{class:"col-lg-9"},r.a.createElement("div",{class:""},r.a.createElement("div",{class:"table-responsive"},r.a.createElement("table",{class:"table project-list-table table-nowrap table-centered table-borderless"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Rate"),r.a.createElement("th",null,"Product"),r.a.createElement("th",null,"Show on feedback page"),r.a.createElement("th",null,"View Details"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,c.feedbacks.map((function(e,a){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,r.a.createElement("h5",{class:"text-truncate font-size-14"},r.a.createElement("a",{href:"#",class:"text-dark"},e.name)),r.a.createElement("p",{class:"text-muted mb-0"},e.description)),r.a.createElement("td",null,e.rate),r.a.createElement("td",null,(e.product||{}).name),r.a.createElement("td",null,e.isShow?r.a.createElement("span",{class:"badge badge-pill badge-soft-success font-size-12",onClick:function(){return E(e._id,!1)},style:{cursor:"pointer"}},"Show"):r.a.createElement("span",{class:"badge badge-pill badge-soft-warning font-size-12",onClick:function(){return E(e._id,!0)},style:{cursor:"pointer"}},"Hiden")),r.a.createElement("td",null,r.a.createElement("button",{type:"button",class:"btn btn-primary btn-sm btn-rounded",onClick:function(){s(Object(S.a)(Object(S.a)({},c),{},{openModalDetail:!0,feedbackSelected:e}))}},"View Details")),r.a.createElement("td",null,r.a.createElement("div",{class:"dropdown"},r.a.createElement("a",{href:"#",class:"dropdown-toggle card-drop","data-toggle":"dropdown","aria-expanded":"false"},r.a.createElement("i",{class:"mdi mdi-dots-horizontal font-size-18"})),r.a.createElement("ul",{class:"dropdown-menu dropdown-menu-right"},ie([w,y],t.role)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){s(Object(S.a)(Object(S.a)({},c),{},{openModalUpdate:!0,feedbackSelected:e}))},class:"dropdown-item"},r.a.createElement("i",{class:"mdi mdi-pencil font-size-16 text-success mr-1"})," ","Edit")),r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){return p(e._id)},class:"dropdown-item"},r.a.createElement("i",{class:"mdi mdi-trash-can font-size-16 text-danger mr-1"})," ","Delete")))))))}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement(Y.a,{previousLabel:r.a.createElement("i",{class:"mdi mdi-chevron-left"}),nextLabel:r.a.createElement("i",{class:"mdi mdi-chevron-right"}),forcePage:c.page-1,breakLabel:"...",breakClassName:"break-me",pageCount:Math.ceil(c.total/20),marginPagesDisplayed:2,pageRangeDisplayed:2,onPageChange:function(e){d(e.selected+1,c.name)},containerClassName:"pagination pagination-rounded justify-content-center mt-4",pageClassName:"page-item",previousClassName:"page-item",nextClassName:"page-item",activeClassName:"active",pageLinkClassName:"page-link",previousLinkClassName:"page-link",nextLinkClassName:"page-link"})))))))))})),xt=a(492),Ot=a(491),jt=a(490),Ct=a(494),kt=a(246),St=a(495),Nt=a(496),Dt=a(84),Mt=a.n(Dt),Tt=xt.a.TextArea,Ft=(Ot.a.Option,{labelCol:{span:2},wrapperCol:{span:22}});var Pt=de((function(e){var t=Object(o.useRecoilValue)(O),a=Object(n.useState)({tasty:{},loading:!1,sProducts:[],fetching:!1}),l=Object(u.a)(a,2),c=l[0],s=l[1],d=function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Object(S.a)(Object(S.a)({},c),{},{loading:!0})),e.next=4,ct();case 4:t=e.sent,s(Object(S.a)(Object(S.a)({},c),{},{tasty:t.data||{}})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),s(Object(S.a)(Object(S.a)({},c),{},{loading:!1})),b.a.error(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){d()}),[]);var p=jt.a.useForm(),E=Object(u.a)(p,1)[0],f=function(){var e=Object(m.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie([w,"B3_MOD",y],t.role)||b.a.error("You do not have permission to do this"),e.prev=1,e.next=4,ot(a);case 4:e.sent,b.a.success("C\u1eadp nh\u1eadt setting th\xe0nh c\xf4ng"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),b.a.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{class:"page-content"},r.a.createElement("div",{class:"container-fluid"},r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"col-12"},r.a.createElement("div",{class:"page-title-box d-flex align-items-center justify-content-between"},r.a.createElement("h4",{class:"mb-0 font-size-18"},"Settings")))),r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"col-lg-12"},r.a.createElement("div",{class:"card"},r.a.createElement("div",{class:"card-body"},!c.loading&&r.a.createElement(jt.a,{form:E,name:"dynamic_form_nest_item",onFinish:f,autoComplete:"off",initialValues:c.tasty},r.a.createElement(jt.a.Item,Object.assign({},Ft,{name:"title",label:"Title"}),r.a.createElement(Tt,{rows:2})),r.a.createElement(jt.a.Item,Object.assign({},Ft,{name:"ctaImage",label:"Banner"}),r.a.createElement(X,{initFiles:[(c.tasty||{}).ctaImage],onUploaded:function(e){E.setFieldsValue({ctaImage:e[0]})},maxFiles:1})),r.a.createElement(jt.a.Item,Object.assign({},Ft,{name:"ctaDescription",label:"Description"}),r.a.createElement(Tt,{rows:3})),r.a.createElement(jt.a.Item,Object.assign({},Ft,{name:"title1",label:"Title 1"}),r.a.createElement(Tt,{rows:2})),r.a.createElement(jt.a.Item,Object.assign({},Ft,{name:"title2",label:"Title 2"}),r.a.createElement(Tt,{rows:2})),r.a.createElement(jt.a.Item,Object.assign({},Ft,{name:"ctaDescription2",label:"Description 2"}),r.a.createElement(Tt,{rows:2})),r.a.createElement("div",{className:"ant-row ant-form-item"},r.a.createElement("div",{className:"ant-col ant-col-2 ant-form-item-label"},r.a.createElement("label",{title:"Products 2"},"Products")),r.a.createElement("div",{className:"ant-col ant-col-22 ant-form-item-control"},r.a.createElement(jt.a.List,{name:"products",noStyle:!0},(function(e,t){var a=t.add,n=t.remove;return r.a.createElement(r.a.Fragment,null,e.map((function(e,t){return r.a.createElement("div",{className:"",style:{display:"flex",alignItems:"center"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column",flex:1}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column",marginBottom:"15px"}},r.a.createElement("label",null,"Name"),r.a.createElement(jt.a.Item,Object.assign({},e,{noStyle:!0,name:[e.name,"name"]}),r.a.createElement(xt.a,null))),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"15px"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column",flex:1,marginRight:"5px"}},r.a.createElement("label",null,"Type"),r.a.createElement(jt.a.Item,Object.assign({},e,{noStyle:!0,name:[e.name,"type"]}),r.a.createElement(xt.a,null))),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",flex:1,marginLeft:"5px"}},r.a.createElement("label",null,"Origin"),r.a.createElement(jt.a.Item,Object.assign({},e,{noStyle:!0,name:[e.name,"origin"]}),r.a.createElement(xt.a,null)))),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",marginBottom:"15px"}},r.a.createElement("label",null,"Description"),r.a.createElement(jt.a.Item,Object.assign({},e,{noStyle:!0,name:[e.name,"description"]}),r.a.createElement(Tt,{rows:2}))),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"15px"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column",flex:1,marginRight:"5px"}},r.a.createElement("label",null,"Price 25ml"),r.a.createElement(jt.a.Item,Object.assign({},e,{noStyle:!0,name:[e.name,"price25"]}),r.a.createElement(Ct.a,{style:{width:"100%"}}))),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",flex:1,marginRight:"5px",marginLeft:"5px"}},r.a.createElement("label",null,"Price 75ml"),r.a.createElement(jt.a.Item,Object.assign({},e,{noStyle:!0,name:[e.name,"price75"]}),r.a.createElement(Ct.a,{style:{width:"100%"}}))),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",flex:1,marginRight:"5px",marginLeft:"5px"}},r.a.createElement("label",null,"Price 125ml"),r.a.createElement(jt.a.Item,Object.assign({},e,{noStyle:!0,name:[e.name,"price125"]}),r.a.createElement(Ct.a,{style:{width:"100%"}}))),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",flex:1,marginLeft:"5px"}},r.a.createElement("label",null,"Price bottle"),r.a.createElement(jt.a.Item,Object.assign({},e,{noStyle:!0,name:[e.name,"bottle"]}),r.a.createElement(Ct.a,{style:{width:"100%"}}))))),r.a.createElement(St.a,{onClick:function(){return n(e.name)},style:{height:"fit-content",width:"50px"}}))})),r.a.createElement(jt.a.Item,null,r.a.createElement(kt.a,{type:"dashed",onClick:function(){return a()},block:!0,icon:r.a.createElement(Nt.a,null)},"Add product")))})))),r.a.createElement(jt.a.Item,Object.assign({},Ft,{name:"housePoursTitle",label:"House pours title"}),r.a.createElement(Tt,{rows:2})),r.a.createElement(jt.a.Item,Object.assign({},Ft,{name:"housePoursDescription",label:"House pours desctiption"}),r.a.createElement(Tt,{rows:3})),r.a.createElement(jt.a.Item,Object.assign({},Ft,{name:"sparklingTitle",label:"Sparkling title"}),r.a.createElement(Tt,{rows:2})),r.a.createElement("div",{className:"ant-row ant-form-item"},r.a.createElement("div",{className:"ant-col ant-col-2 ant-form-item-label"},r.a.createElement("label",{title:"Products 2"},"House pours")),r.a.createElement("div",{className:"ant-col ant-col-22 ant-form-item-control"},r.a.createElement(jt.a.List,{name:"housePours",noStyle:!0},(function(e,t){var a=t.add,n=t.remove;return r.a.createElement(r.a.Fragment,null,e.map((function(e,t){return r.a.createElement("div",{className:"",style:{display:"flex",alignItems:"center"}},r.a.createElement("div",{style:{display:"flex",flex:1,justifyContent:"space-between",marginBottom:"15px"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column",flex:1,marginRight:"20px"}},r.a.createElement("label",null,"Name"),r.a.createElement(jt.a.Item,Object.assign({},e,{noStyle:!0,name:[e.name,"name"]}),r.a.createElement(xt.a,{style:{width:"100%"}}))),r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.a.createElement("label",null,"Price"),r.a.createElement(jt.a.Item,Object.assign({},e,{noStyle:!0,name:[e.name,"price"]}),r.a.createElement(Ct.a,null)))),r.a.createElement(St.a,{onClick:function(){return n(e.name)},style:{height:"fit-content",width:"50px"}}))})),r.a.createElement(jt.a.Item,null,r.a.createElement(kt.a,{type:"dashed",onClick:function(){return a()},block:!0,icon:r.a.createElement(Nt.a,null)},"Add product")))})))),r.a.createElement(jt.a.Item,null,r.a.createElement(kt.a,{type:"primary",htmlType:"submit"},"Submit"))))))))))}));xt.a.TextArea,Ot.a.Option;var At=de((function(e){var t=Object(n.useState)({ident:"",title:"",description:"",title2:"",title2Image:"",description2:"",title3:"",description3:"",title4:"",description4:"",loading:!1}),a=Object(u.a)(t,2),l=a[0],c=a[1],o=function(){var e=Object(m.a)(i.a.mark((function e(){var t,a,n,r,o,s,m,u,d,p,E;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(Object(S.a)(Object(S.a)({},l),{},{loading:!0})),e.next=4,st();case 4:t=e.sent,a=t.data,n=a.title,r=a.description,o=a.title2,s=a.title2Image,m=a.description2,u=a.title3,d=a.description3,p=a.title4,E=a.description4,c(Object(S.a)(Object(S.a)({},l),{},{title:n,description:r,title2:o,title2Image:s,description2:m,title3:u,description3:d,title4:p,description4:E,loading:!1})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),c(Object(S.a)(Object(S.a)({},l),{},{loading:!1})),b.a.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){o()}),[]);var s=function(e,t){c(Object(S.a)(Object(S.a)({},l),{},Object(q.a)({},e,t)))},d=function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,it({title:l.title,description:l.description,title2:l.title2,title2Image:l.title2Image,description2:l.description2,title3:l.title3,description3:l.description3,title4:l.title4,description4:l.description4});case 4:e.sent,b.a.success("C\u1eadp nh\u1eadt setting th\xe0nh c\xf4ng"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),b.a.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{class:"page-content"},r.a.createElement("div",{class:"container-fluid"},r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"col-12"},r.a.createElement("div",{class:"page-title-box d-flex align-items-center justify-content-between"},r.a.createElement("h4",{class:"mb-0 font-size-18"},"Settings")))),r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"col-lg-12"},r.a.createElement("div",{class:"card"},r.a.createElement("div",{class:"card-body"},!l.loading&&r.a.createElement("form",{class:"outer-repeater",onSubmit:d},r.a.createElement("div",{"data-repeater-list":"outer-group",class:"outer"},r.a.createElement("div",{"data-repeater-item":!0,class:"outer"},r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"setting-title",class:"col-form-label col-lg-2"},"Title"),r.a.createElement("div",{class:"col-lg-10"},r.a.createElement("textarea",{class:"form-control",rows:"2",id:"setting-title",value:l.title,onChange:function(e){return s("title",e.target.value)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"setting-description",class:"col-form-label col-lg-2"},"Description"),r.a.createElement("div",{class:"col-lg-10"},r.a.createElement("textarea",{class:"form-control",rows:"3",id:"setting-description",value:l.description,onChange:function(e){return s("description",e.target.value)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"setting-description",class:"col-form-label col-lg-2"},"Ti\xeau \u0111\u1ec1 th\u01b0\u01a1ng hi\u1ec7u"),r.a.createElement("div",{class:"col-lg-10"},r.a.createElement("textarea",{class:"form-control",rows:"2",id:"setting-description",value:l.title2,onChange:function(e){return s("title2",e.target.value)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"taskbudget",class:"col-form-label col-lg-2"},"\u1ea2nh th\u01b0\u01a1ng hi\u1ec7u"),r.a.createElement("div",{class:"col-lg-10"},r.a.createElement(X,{initFiles:[l.title2Image],onUploaded:function(e){s("title2Image",e)},maxFiles:1}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"setting-description",class:"col-form-label col-lg-2"},"M\xf4 t\u1ea3 th\u01b0\u01a1ng hi\u1ec7u"),r.a.createElement("div",{class:"col-lg-10"},r.a.createElement("textarea",{class:"form-control",rows:"3",id:"setting-description",value:l.description2,onChange:function(e){return s("description2",e.target.value)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"setting-title",class:"col-form-label col-lg-2"},"Ti\xeau \u0111\u1ec1 ch\u1ee9ng nh\u1eadn"),r.a.createElement("div",{class:"col-lg-10"},r.a.createElement("textarea",{class:"form-control",rows:"2",id:"setting-title1",value:l.title3,onChange:function(e){return s("title3",e.target.value)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"setting-title",class:"col-form-label col-lg-2"},"M\xf4 t\u1ea3 ch\u1ee9ng nh\u1eadn"),r.a.createElement("div",{class:"col-lg-10"},r.a.createElement("textarea",{class:"form-control",rows:"2",id:"setting-title2",value:l.description3,onChange:function(e){return s("description3",e.target.value)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"setting-title",class:"col-form-label col-lg-2"},"Ti\xeau \u0111\u1ec1 \u0111\u1ed1i t\xe1c"),r.a.createElement("div",{class:"col-lg-10"},r.a.createElement("textarea",{class:"form-control",rows:"2",id:"setting-title1",value:l.title4,onChange:function(e){return s("title4",e.target.value)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"setting-title",class:"col-form-label col-lg-2"},"M\xf4 t\u1ea3 \u0111\u1ed1i t\xe1c"),r.a.createElement("div",{class:"col-lg-10"},r.a.createElement("textarea",{class:"form-control",rows:"2",id:"setting-title2",value:l.description4,onChange:function(e){return s("description4",e.target.value)}})))),r.a.createElement("div",{class:"row justify-content-end"},r.a.createElement("div",{class:"col-lg-10"},r.a.createElement("button",{type:"submit",class:"btn btn-primary"},"Save"))))))))))))})),zt=a(489),Lt=(a(480),function(){var e=Object(m.a)(i.a.mark((function e(t,a,n,r,l){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/voucher/all?limit=".concat(t,"&page=").concat(a,"&code=").concat(n,"&type=").concat(r,"&available=").concat(l));case 3:return c=e.sent,e.abrupt("return",c);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a,n,r,l){return e.apply(this,arguments)}}()),Ut=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/voucher",{method:"POST",body:JSON.stringify(t)});case 3:return a=e.sent,e.abrupt("return",a);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),_t=function(){var e=Object(m.a)(i.a.mark((function e(t,a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/voucher/".concat(t),{method:"PUT",body:JSON.stringify(a)});case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),It=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/voucher/".concat(t),{method:"DELETE"});case 3:return a=e.sent,e.abrupt("return",a);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Vt=Ot.a.Option;function Rt(e){var t=e.visible,a=e.onClose,l=e.voucher,c=e.onUpdated,o=e.isCreate,s=Object(n.useState)({code:l.code||"",value:l.value||0,type:l.type||"price",userIds:l.userIds||[],validAt:l.validAt?new Date(l.validAt):"",isAll:l.isAll||!1,values:[],users:[],loading:!1,fetching:!1}),d=Object(u.a)(s,2),p=d[0],E=d[1],f=function(e,t){E(Object(S.a)(Object(S.a)({},p),{},Object(q.a)({},e,t)))},v=function(){var e=Object(m.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E(Object(S.a)(Object(S.a)({},p),{},{loading:!0})),e.prev=1,t.preventDefault(),a={code:p.code,type:p.type,value:p.value,userIds:p.userIds,validAt:p.validAt,isAll:p.isAll},se(a),n={},!o){e.next=12;break}return e.next=9,Ut(a);case 9:n=e.sent,e.next=15;break;case 12:return e.next=14,_t(l._id,a);case 14:n=e.sent;case 15:c(n.data),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),b.a.error(e.t0.message);case 21:E(Object(S.a)(Object(S.a)({},p),{},{loading:!1}));case 22:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(m.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(Object(S.a)(Object(S.a)({},p),{},{fetching:!0})),a=Object(S.a)(Object(S.a)({},p),{},{fetching:!0}),e.prev=2,e.next=5,re(10,1,t,"","");case 5:n=e.sent,a.users=n.data.users,a.fetching=!1,e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),a.fetching=!1,b.a.error(e.t0.message);case 14:E(a);case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(ee,{visible:t},r.a.createElement(te,null,r.a.createElement("h5",{class:"modal-title"},o?"Create voucher":"Update voucher"),r.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:a},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("form",{onSubmit:v},r.a.createElement(ae,null,r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{htmlFor:"code",class:"col-sm-3 col-form-label"},"Code"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement("input",{type:"text",class:"form-control",id:"code",value:p.code,onChange:function(e){return f("code",e.target.value)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{htmlFor:"userAddress",class:"col-sm-3 col-form-label"},"Lo\u1ea1i gi\xe1 tr\u1ecb"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement("select",{class:"form-control",id:"level-select",value:p.type,onChange:function(e){return f("type",e.target.value)}},r.a.createElement("option",{value:"percent"},"%"),r.a.createElement("option",{value:"price"},"vn\u0111")))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{htmlFor:"value",class:"col-sm-3 col-form-label"},"Gi\xe1 tr\u1ecb"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement("input",{type:"number",class:"form-control",id:"value",value:p.value,onChange:function(e){return f("value",e.target.value)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{htmlFor:"users",class:"col-sm-3 col-form-label"},"Th\xe0nh vi\xean (\u0111\u1ec3 tr\u1ed1ng n\u1ebfu l\xe0 lo\u1ea1i chung)"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement(Ot.a,{mode:"multiple",labelInValue:!0,value:p.values,placeholder:"Select users",notFoundContent:p.fetching?r.a.createElement(zt.a,{size:"small"}):null,filterOption:!1,onSearch:Mt()(g,800),onChange:function(e){return E(Object(S.a)(Object(S.a)({},p),{},{values:e,userIds:e.map((function(e){return e.key}))}))},style:{width:"100%"}},p.users.map((function(e){return r.a.createElement(Vt,{key:e._id},e.name)}))))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{htmlFor:"userBirday",class:"col-sm-3 col-form-label"},"Valid at"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement(W.a,{dateFormat:"dd/MM/yyyy",className:"form-control",selected:p.validAt,onChange:function(e){f("validAt",e)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{htmlFor:"userAddress",class:"col-sm-3 col-form-label"},"Lo\u1ea1i"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement("select",{class:"form-control",id:"level-select",value:p.isAll,onChange:function(e){return f("isAll",e.target.value)}},r.a.createElement("option",{value:!0},"D\xf9ng chung"),r.a.createElement("option",{value:!1},"C\xe1 nh\xe2n"))))),r.a.createElement(ne,null,r.a.createElement("button",{type:"button",class:"btn btn-secondary",onClick:a},"Close"),r.a.createElement("button",{type:"submit",class:"btn btn-primary w-md"},p.loading&&r.a.createElement("i",{class:"bx bx-loader bx-spin font-size-16 align-middle mr-2"}),"Submit"))))}var Bt=de((function(e){var t=Object(o.useRecoilValue)(O),a=Object(n.useState)({openModalCreate:!1,openModalUpdate:!1,voucherSelected:{},vouchers:[],total:0,page:1,code:"",type:0,available:0,loading:!1}),l=Object(u.a)(a,2),c=l[0],s=l[1],d=function(e,t){s(Object(S.a)(Object(S.a)({},c),{},Object(q.a)({},e,t)))},p=function(){var e=Object(m.a)(i.a.mark((function e(t,a,n,r){var l,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(Object(S.a)(Object(S.a)({},c),{},{loading:!0,page:t})),l=Object(S.a)(Object(S.a)({},c),{},{loading:!0,page:t}),e.prev=2,e.next=5,Lt(20,t,a,n,r);case 5:o=e.sent,l.vouchers=o.data.vouchers,l.total=o.data.total,l.loading=!1,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),l.loading=!1,b.a.error(e.t0.message);case 15:s(l);case 16:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,a,n,r){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){p(1,c.code,c.type,c.available)}),[]);var E=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(S.a)(Object(S.a)({},c),{},{loading:!0}),e.prev=1,e.next=4,It(t);case 4:e.sent,a.loading=!1,a.vouchers=c.vouchers.filter((function(e){return e._id!==t})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),a.loading=!1,b.a.error(e.t0.message);case 13:s(a);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,(c.openModalUpdate||c.openModalCreate)&&r.a.createElement(Rt,{isCreate:c.openModalCreate,visible:c.openModalUpdate||c.openModalCreate,voucher:c.voucherSelected,onClose:function(){s(Object(S.a)(Object(S.a)({},c),{},{openModalUpdate:!1,openModalCreate:!1,voucherSelected:{}}))},onUpdated:function(e){c.openModalCreate?s(Object(S.a)(Object(S.a)({},c),{},{openModalCreate:!1,vouchers:20===c.vouchers.length?[e].concat(Object(J.a)(c.vouchers)).slice(0,-1):[e].concat(Object(J.a)(c.vouchers))})):s(Object(S.a)(Object(S.a)({},c),{},{openModalUpdate:!1,voucherSelected:{},vouchers:c.vouchers.map((function(t){return t._id===e._id?e:t}))}))}}),r.a.createElement("div",{className:"page-content"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"page-title-box d-flex align-items-center justify-content-between"},r.a.createElement("h4",{className:"mb-0 font-size-18"},"Vouchers List"),r.a.createElement("div",{className:"page-title-right"},ie([w],t.role)&&r.a.createElement("button",{type:"submit",class:"btn btn-primary w-md",onClick:function(){s(Object(S.a)(Object(S.a)({},c),{},{openModalCreate:!0}))}},"Th\xeam voucher"))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-3"},r.a.createElement("div",{class:"card"},r.a.createElement("div",{class:"card-body"},r.a.createElement("h4",{class:"card-title mb-4"},"Filter"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),p(1,c.code,c.type,c.available)}},r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{htmlFor:"role-select"},"Lo\u1ea1i"),r.a.createElement("select",{class:"form-control",id:"role-select",value:c.type,onChange:function(e){d("type",e.target.value)}},r.a.createElement("option",{value:0},"T\u1ea5t c\u1ea3"),r.a.createElement("option",{value:1},"D\xf9ng chung"),r.a.createElement("option",{value:2},"C\xe1 nh\xe2n"))),r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{htmlFor:"role-select"},"Th\u1eddi h\u1ea1n"),r.a.createElement("select",{class:"form-control",id:"role-select",value:c.available,onChange:function(e){d("available",e.target.value)}},r.a.createElement("option",{value:0},"T\u1ea5t c\u1ea3"),r.a.createElement("option",{value:1},"C\xf2n h\u1ea1n"),r.a.createElement("option",{value:2},"H\u1ebft h\u1ea1n"))),r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{htmlFor:"name-select"},"M\xe3"),r.a.createElement("input",{class:"form-control",type:"text",id:"name-select",value:c.code,onChange:function(e){d("code",e.target.value)}})),r.a.createElement("button",{type:"submit",class:"btn btn-primary"},"T\xecm ki\u1ebfm"))))),r.a.createElement("div",{className:"col-lg-9"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-centered table-nowrap table-hover"},r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col",style:{width:"70px"}},"#"),r.a.createElement("th",{scope:"col"},"Code"),r.a.createElement("th",{scope:"col"},"Gi\xe1 tr\u1ecb"),r.a.createElement("th",{scope:"col"},"Lo\u1ea1i"),r.a.createElement("th",{scope:"col"},"Th\u1eddi h\u1ea1n"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,c.vouchers.map((function(e,a){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null),r.a.createElement("td",null,e.code),r.a.createElement("td",null,Oe()(e.value).format("0,0"),"percent"===e.type?"%":"\u0111"),r.a.createElement("td",null,e.isAll?"D\xf9ng chung":"C\xe1 nh\xe2n"),r.a.createElement("td",null,Ae()(e.validAt).format("DD-MM-YYYY")),r.a.createElement("td",null,r.a.createElement("div",{class:"dropdown"},r.a.createElement("a",{class:"dropdown-toggle card-drop","data-toggle":"dropdown","aria-expanded":"false"},r.a.createElement("i",{class:"mdi mdi-dots-horizontal font-size-18"})),r.a.createElement("ul",{className:"dropdown-menu dropdown-menu-right"},ie([w],t.role)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){s(Object(S.a)(Object(S.a)({},c),{},{openModalUpdate:!0,voucherSelected:e}))},class:"dropdown-item"},r.a.createElement("i",{class:"mdi mdi-pencil font-size-16 text-success mr-1"})," ","Edit")),r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){E(e._id)},class:"dropdown-item"},r.a.createElement("i",{class:"mdi mdi-trash-can font-size-16 text-danger mr-1"})," ","Delete")))))))}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement(Y.a,{previousLabel:r.a.createElement("i",{class:"mdi mdi-chevron-left"}),nextLabel:r.a.createElement("i",{class:"mdi mdi-chevron-right"}),forcePage:c.page-1,breakLabel:"...",breakClassName:"break-me",pageCount:Math.ceil(c.total/20),marginPagesDisplayed:2,pageRangeDisplayed:2,onPageChange:function(e){p(e.selected+1,c.code,c.type,c.available)},containerClassName:"pagination pagination-rounded justify-content-center mt-4",pageClassName:"page-item",previousClassName:"page-item",nextClassName:"page-item",activeClassName:"active",pageLinkClassName:"page-link",previousLinkClassName:"page-link",nextLinkClassName:"page-link"}))))))))))}));function Jt(e){var t=e.visible,a=e.onClose,l=e.pos,c=e.onUpdated,o=e.isCreate,s=Object(n.useState)({name:l.name||"",ip:l.ip||"",port:l.port||"",path:l.path||"",loading:!1}),d=Object(u.a)(s,2),p=d[0],E=d[1],f=function(e,t){E(Object(S.a)(Object(S.a)({},p),{},Object(q.a)({},e,t)))},v=function(){var e=Object(m.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E(Object(S.a)(Object(S.a)({},p),{},{loading:!0})),e.prev=1,t.preventDefault(),a={name:p.name,ip:p.ip,port:p.port,path:p.path},se(a),n={},!o){e.next=12;break}return e.next=9,Ue(a);case 9:n=e.sent,e.next=15;break;case 12:return e.next=14,_e(l._id,a);case 14:n=e.sent;case 15:c(n.data),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),b.a.error(e.t0.message);case 21:E(Object(S.a)(Object(S.a)({},p),{},{loading:!1}));case 22:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(ee,{visible:t},r.a.createElement(te,null,r.a.createElement("h5",{class:"modal-title"},o?"Create pos":"Update pos"),r.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:a},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("form",{onSubmit:v},r.a.createElement(ae,null,r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"posName",class:"col-sm-3 col-form-label"},"Name"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement("input",{type:"text",class:"form-control",id:"posName",value:p.name,onChange:function(e){return f("name",e.target.value)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"ip",class:"col-sm-3 col-form-label"},"IP"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement("input",{type:"text",class:"form-control",id:"ip",value:p.ip,onChange:function(e){return f("ip",e.target.value)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"port",class:"col-sm-3 col-form-label"},"Port"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement("input",{type:"text",class:"form-control",id:"port",value:p.port,onChange:function(e){return f("port",e.target.value)}}))),r.a.createElement("div",{class:"form-group row mb-4"},r.a.createElement("label",{for:"path",class:"col-sm-3 col-form-label"},"Path"),r.a.createElement("div",{class:"col-sm-9"},r.a.createElement("input",{type:"text",class:"form-control",id:"path",value:p.path,onChange:function(e){return f("path",e.target.value)}})))),r.a.createElement(ne,null,r.a.createElement("button",{type:"button",class:"btn btn-secondary",onClick:a},"Close"),r.a.createElement("button",{type:"submit",class:"btn btn-primary w-md"},p.loading&&r.a.createElement("i",{class:"bx bx-loader bx-spin font-size-16 align-middle mr-2"}),"Submit"))))}var qt=de((function(e){var t=Object(o.useRecoilValue)(O),a=Ve(),l=Object(u.a)(a,2),c=l[0],s=l[1],d=Object(n.useState)({openModalCreate:!1,openModalUpdate:!1,posSelected:{}}),p=Object(u.a)(d,2),E=p[0],f=p[1],v=function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ie(t);case 3:e.sent,s(c.filter((function(e){return e._id!==t}))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),b.a.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,(E.openModalUpdate||E.openModalCreate)&&r.a.createElement(Jt,{isCreate:E.openModalCreate,visible:E.openModalUpdate||E.openModalCreate,pos:E.posSelected,onClose:function(){f(Object(S.a)(Object(S.a)({},E),{},{openModalUpdate:!1,openModalCreate:!1,posSelected:{}}))},onUpdated:function(e){E.openModalCreate?(f(Object(S.a)(Object(S.a)({},E),{},{openModalCreate:!1})),s([e].concat(Object(J.a)(c)))):(f(Object(S.a)(Object(S.a)({},E),{},{openModalUpdate:!1,posSelected:{}})),s(c.map((function(t){return t._id===e._id?e:t}))))}}),r.a.createElement("div",{className:"page-content"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"page-title-box d-flex align-items-center justify-content-between"},r.a.createElement("h4",{className:"mb-0 font-size-18"},"Pos List"),r.a.createElement("div",{className:"page-title-right"},ie([w],t.role)&&r.a.createElement("button",{type:"submit",class:"btn btn-primary w-md",onClick:function(){f(Object(S.a)(Object(S.a)({},E),{},{openModalCreate:!0}))}},"Th\xeam Pos"))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-centered table-nowrap table-hover"},r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col",style:{width:"70px"}},"#"),r.a.createElement("th",{scope:"col"},"Name"),r.a.createElement("th",{scope:"col"},"IP"),r.a.createElement("th",{scope:"col"},"Port"),r.a.createElement("th",{scope:"col"},"Path"),r.a.createElement("th",{scope:"col"},"Action"))),r.a.createElement("tbody",null,c.map((function(e){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null),r.a.createElement("td",null,r.a.createElement("h5",{className:"font-size-14 mb-1"},r.a.createElement("a",{href:"#",className:"text-dark"},e.name))),r.a.createElement("td",null,e.ip),r.a.createElement("td",null,e.port),r.a.createElement("td",null,e.path),r.a.createElement("td",null,r.a.createElement("div",{class:"dropdown"},r.a.createElement("a",{class:"dropdown-toggle card-drop","data-toggle":"dropdown","aria-expanded":"false"},r.a.createElement("i",{class:"mdi mdi-dots-horizontal font-size-18"})),r.a.createElement("ul",{className:"dropdown-menu dropdown-menu-right"},ie([w],t.role)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){f(Object(S.a)(Object(S.a)({},E),{},{openModalUpdate:!0,posSelected:e}))},class:"dropdown-item"},r.a.createElement("i",{class:"mdi mdi-pencil font-size-16 text-success mr-1"})," ","Edit")),r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){return v(e._id)},class:"dropdown-item"},r.a.createElement("i",{class:"mdi mdi-trash-can font-size-16 text-danger mr-1"})," ","Delete")))))))}))))))))))))}));var Ht=function(){var e=Object(n.useState)(!0),t=Object(u.a)(e,2),a=(t[0],t[1]),l=Object(o.useSetRecoilState)(O),c=function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!L.getToken()){e.next=13;break}return e.prev=1,a(!0),e.next=5,V();case 5:t=e.sent,v()(x,t.data.role)?l(t.data):L.logout(),a(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),b.a.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){c(),b.a.options={closeButton:!1,debug:!1,newestOnTop:!1,progressBar:!1,positionClass:"toast-top-right",preventDuplicates:!1,onclick:null,showDuration:300,hideDuration:1e3,timeOut:5e3,extendedTimeOut:1e3,showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"}}),[]),r.a.createElement(d.a,null,r.a.createElement(p.d,null,r.a.createElement(k,{exact:!0,path:"/",component:B}),r.a.createElement(C,{path:"/users",component:Ee,role:"CS_STAFF"}),r.a.createElement(C,{path:"/categories",component:we,role:"CS_STAFF"}),r.a.createElement(C,{path:"/vouchers",component:Bt,role:"CS_STAFF"}),r.a.createElement(C,{path:"/products",component:Me,role:"CS_STAFF"}),r.a.createElement(C,{path:"/orders",component:We,role:"CS_STAFF"}),r.a.createElement(C,{path:"/create-post",component:nt,role:"CS_STAFF"}),r.a.createElement(C,{path:"/settings",component:mt,role:"CS_STAFF"}),r.a.createElement(C,{path:"/posts",component:ut,role:"CS_STAFF"}),r.a.createElement(C,{path:"/post/:postSlug",component:nt,role:"CS_STAFF"}),r.a.createElement(C,{path:"/pages",component:bt,role:"CS_STAFF"}),r.a.createElement(C,{path:"/feedbacks",component:wt,role:"CS_STAFF"}),r.a.createElement(C,{path:"/pos",component:qt,role:"CS_STAFF"}),r.a.createElement(C,{path:"/tasty",component:Pt,role:"CS_STAFF"}),r.a.createElement(C,{path:"/about-us",component:At,role:"CS_STAFF"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(481),a(482);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.RecoilRoot,null,r.a.createElement(Ht,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[251,1,2]]]);
//# sourceMappingURL=main.5306b4e8.chunk.js.map